openapi: 3.0.3
info:
  title: MueJam Library API
  version: 1.0.0
  description: "\n    MueJam Library is a digital library platform for serial stories\
    \ with an integrated micro-posting system.\n    \n    ## Features\n    - **Story\
    \ Discovery**: Browse trending, new, and personalized story recommendations\n\
    \    - **Reading Experience**: Distraction-free reader with customizable settings\n\
    \    - **Library Management**: Organize stories into personal shelves\n    - **Whispers**:\
    \ Micro-posting system for global, story-linked, and highlight-linked posts\n\
    \    - **Social Features**: Follow authors, block users, and engage with the community\n\
    \    - **Notifications**: Stay informed about replies and follows\n    \n    ##\
    \ Authentication\n    All authenticated endpoints require a Bearer token in the\
    \ Authorization header.\n    Tokens are issued by Clerk authentication service.\n\
    \    \n    Example: `Authorization: Bearer <your_token>`\n    \n    ## Mobile\
    \ Integration\n    \n    ### Client Type Header\n    Mobile clients should include\
    \ the `X-Client-Type` header to receive optimized responses:\n    - `mobile-ios`\
    \ - iOS mobile app\n    - `mobile-android` - Android mobile app\n    - `web` -\
    \ Web browser (default if not specified)\n    \n    Example: `X-Client-Type: mobile-ios`\n\
    \    \n    ### Mobile-Specific Features\n    When using mobile client types, the\
    \ API provides:\n    - **Deep Links**: Responses include `deep_link` fields with\
    \ platform-specific URLs (muejam://)\n    - **Field Filtering**: Use `?fields=id,title,author`\
    \ to request only specific fields\n    - **Response Optimization**: Compressed\
    \ responses and optimized payload sizes\n    - **Offline Support**: ETag and Last-Modified\
    \ headers for conditional requests\n    - **Push Notifications**: Device token\
    \ registration and notification delivery\n    \n    ### API Versioning\n    The\
    \ API uses path-based versioning:\n    - `/v1/` - Current stable API version\n\
    \    - Future versions will be introduced as `/v2/`, `/v3/`, etc.\n    \n    Deprecated\
    \ versions will include `X-API-Deprecation` and `X-API-Sunset` headers.\n    \n\
    \    ### Rate Limiting\n    Rate limits vary by client type:\n    - Web clients:\
    \ 100 requests/minute\n    - Mobile clients: 150 requests/minute\n    - Authenticated\
    \ users: Higher limits than anonymous\n    \n    When rate limited, responses\
    \ include:\n    - `X-RateLimit-Remaining`: Requests remaining in current window\n\
    \    - `X-RateLimit-Reset`: Timestamp when limit resets\n    - `Retry-After`:\
    \ Seconds to wait before retrying (on 429 responses)\n    "
  contact:
    name: MueJam Library Support
    email: support@muejam.com
  license:
    name: Proprietary
  x-deep-link-patterns:
    description: Deep link URL patterns for mobile app navigation
    patterns:
      story:
        pattern: muejam://story/{story_id}
        example: muejam://story/cm4abc123def456
        description: Opens a story detail view in the mobile app
      chapter:
        pattern: muejam://chapter/{chapter_id}
        example: muejam://chapter/cm4xyz789ghi012
        description: Opens a chapter reader view in the mobile app
      whisper:
        pattern: muejam://whisper/{whisper_id}
        example: muejam://whisper/cm4whi123spr456
        description: Opens a whisper detail view in the mobile app
      profile:
        pattern: muejam://profile/{user_id}
        example: muejam://profile/cm4usr789pro012
        description: Opens a user profile view in the mobile app
paths:
  /v1/admin/audit-logs/:
    get:
      operationId: admin_audit_logs_retrieve
      tags:
      - admin
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/admin/audit-logs/suspicious-patterns/:
    get:
      operationId: admin_audit_logs_suspicious_patterns_retrieve
      tags:
      - admin
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/admin/audit-logs/trigger-alert/:
    post:
      operationId: admin_audit_logs_trigger_alert_create
      tags:
      - admin
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/analytics/dashboard/:
    get:
      operationId: analytics_dashboard_retrieve
      description: |-
        GET /v1/analytics/dashboard - Get author analytics dashboard

        Requirements:
            - 26.1: Analytics dashboard accessible to users with published content
            - 26.9: Most popular stories and chapters by engagement

        Returns comprehensive analytics for the authenticated author
      tags:
      - analytics
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/analytics/follower-growth/:
    get:
      operationId: analytics_follower_growth_retrieve
      description: |-
        GET /v1/analytics/follower-growth - Get follower growth over time

        Requirements:
            - 26.8: Follower growth over time

        Query params:
            - days: Number of days to include (default: 90)
      tags:
      - analytics
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/analytics/mobile/:
    get:
      operationId: analytics_mobile_retrieve
      description: |-
        GET /v1/analytics/mobile - Get mobile-specific analytics metrics

        Requirements:
            - 14.2: Track API response times per client type
            - 14.3: Track push notification delivery rates
            - 14.4: Track media upload success rates

        Returns mobile analytics including:
        - API response times per client type (web, mobile-ios, mobile-android)
        - Push notification delivery rates and failures
        - Media upload success rates

        Note: This endpoint requires admin/staff permissions
      tags:
      - analytics
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/analytics/stories/{story_id}/:
    get:
      operationId: analytics_stories_retrieve
      description: |-
        GET /v1/analytics/stories/{story_id} - Get detailed analytics for a story

        Requirements:
            - 26.2: Story-level metrics
            - 26.3: Chapter-level metrics
            - 26.4: Reader demographics
            - 26.5: Engagement trends
            - 26.6: Traffic sources
            - 26.7: Reader retention
            - 26.12: Comparative metrics

        Query params:
            - include: Comma-separated list of sections to include
              (metrics, chapters, demographics, trends, sources, retention, comparative)
      parameters:
      - in: path
        name: story_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - analytics
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/analytics/stories/{story_id}/export/:
    get:
      operationId: analytics_stories_export_retrieve
      description: |-
        GET /v1/analytics/stories/{story_id}/export - Export analytics as CSV

        Requirements:
            - 26.10: Export analytics data as CSV

        Query params:
            - type: Type of data to export (metrics, chapters, trends)
      parameters:
      - in: path
        name: story_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - analytics
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/app-admin/dashboard:
    get:
      operationId: app_admin_dashboard_retrieve
      description: |-
        Get complete dashboard data.

        Returns:
            - system_health: System health indicators
            - real_time_metrics: Real-time platform metrics
            - business_metrics: Business metrics (30 days)
            - moderation_metrics: Content moderation metrics
      tags:
      - app-admin
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/app-admin/health:
    get:
      operationId: app_admin_health_retrieve
      description: |-
        Get system health indicators.

        Returns:
            - database_status: Database health status
            - cache_status: Cache health status
            - external_services: External service statuses
            - disk_space: Disk usage percentage
            - memory_usage: Memory usage percentage
      tags:
      - app-admin
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/app-admin/metrics/business:
    get:
      operationId: app_admin_metrics_business_retrieve
      description: |-
        Get business metrics.

        Query Parameters:
            days: Number of days to look back (default 30)

        Returns:
            - new_signups: User signup metrics
            - stories_published: Story publication metrics
            - whispers_posted: Whisper posting metrics
            - engagement_rates: Engagement metrics
            - user_retention: Retention metrics
      tags:
      - app-admin
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/app-admin/metrics/moderation:
    get:
      operationId: app_admin_metrics_moderation_retrieve
      description: |-
        Get moderation metrics.

        Returns:
            - pending_reports: Count of pending reports
            - reports_resolved_today: Count of reports resolved today
            - average_resolution_time: Average resolution time in hours
            - actions_by_type: Breakdown of moderation actions
      tags:
      - app-admin
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/app-admin/metrics/real-time:
    get:
      operationId: app_admin_metrics_real_time_retrieve
      description: |-
        Get real-time metrics.

        Returns:
            - active_users: Count of active users
            - requests_per_minute: Current request rate
            - error_rate: Current error rate
            - api_response_times: Response time percentiles
      tags:
      - app-admin
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/bookmarks/{bookmark_id}:
    delete:
      operationId: bookmarks_destroy
      description: |-
        Delete a bookmark.

        DELETE /v1/bookmarks/{id}

        Returns:
            - 204: Bookmark deleted successfully
            - 401: Not authenticated
            - 403: Not authorized (not the bookmark owner)
            - 404: Bookmark not found

        Requirements:
            - 3.6: Delete bookmark
      parameters:
      - in: path
        name: bookmark_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - bookmarks
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '204':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/chapters/{chapter_id}:
    get:
      operationId: chapters_retrieve
      description: |-
        Get a chapter by ID.

        GET /v1/chapters/{id}

        Returns:
            - 200: Chapter details with content
            - 304: Not Modified (if content hasn't changed)
            - 404: Chapter not found or deleted

        Requirements:
            - 5.2: Get chapter content
            - 9.2: Support conditional requests
            - 9.3: Return 304 Not Modified when appropriate
      parameters:
      - in: path
        name: chapter_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - chapters
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/chapters/{chapter_id}/bookmarks:
    get:
      operationId: chapters_bookmarks_retrieve
      description: |-
        List bookmarks or create a new bookmark for a chapter.

        GET /v1/chapters/{id}/bookmarks - List bookmarks
        POST /v1/chapters/{id}/bookmarks - Create bookmark
      parameters:
      - in: path
        name: chapter_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - chapters
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
    post:
      operationId: chapters_bookmarks_create
      description: |-
        List bookmarks or create a new bookmark for a chapter.

        GET /v1/chapters/{id}/bookmarks - List bookmarks
        POST /v1/chapters/{id}/bookmarks - Create bookmark
      parameters:
      - in: path
        name: chapter_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - chapters
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/chapters/{chapter_id}/delete:
    delete:
      operationId: chapters_delete_destroy
      description: |-
        Soft delete a chapter.

        DELETE /v1/chapters/{id}

        Returns:
            - 204: Chapter deleted successfully
            - 401: Not authenticated
            - 403: Not authorized (not the story author)
            - 404: Chapter not found

        Requirements:
            - 5.7: Soft delete by setting deleted_at timestamp
      parameters:
      - in: path
        name: chapter_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - chapters
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '204':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/chapters/{chapter_id}/highlights:
    get:
      operationId: chapters_highlights_retrieve
      description: |-
        List highlights or create a new highlight for a chapter.

        GET /v1/chapters/{id}/highlights - List highlights
        POST /v1/chapters/{id}/highlights - Create highlight
      parameters:
      - in: path
        name: chapter_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - chapters
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
    post:
      operationId: chapters_highlights_create
      description: |-
        List highlights or create a new highlight for a chapter.

        GET /v1/chapters/{id}/highlights - List highlights
        POST /v1/chapters/{id}/highlights - Create highlight
      parameters:
      - in: path
        name: chapter_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - chapters
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/chapters/{chapter_id}/progress:
    get:
      operationId: chapters_progress_retrieve
      description: |-
        Get or update reading progress for a chapter.

        GET /v1/chapters/{id}/progress - Get reading progress
        POST /v1/chapters/{id}/progress - Update reading progress
      parameters:
      - in: path
        name: chapter_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - chapters
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
    post:
      operationId: chapters_progress_create
      description: |-
        Get or update reading progress for a chapter.

        GET /v1/chapters/{id}/progress - Get reading progress
        POST /v1/chapters/{id}/progress - Update reading progress
      parameters:
      - in: path
        name: chapter_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - chapters
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/chapters/{chapter_id}/publish:
    post:
      operationId: chapters_publish_create
      description: |-
        Publish a chapter.

        POST /v1/chapters/{id}/publish

        Returns:
            - 200: Chapter published successfully
            - 401: Not authenticated
            - 403: Not authorized (not the story author)
            - 404: Chapter not found
            - 429: Rate limit exceeded

        Requirements:
            - 5.4: Set published=true and record publication timestamp
            - 5.8: Enforce rate limit of 5 publish operations per hour
      parameters:
      - in: path
        name: chapter_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - chapters
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/chapters/{chapter_id}/update:
    put:
      operationId: chapters_update_update
      description: |-
        Update a chapter draft.

        PUT /v1/chapters/{id}

        Request body:
            - title: Chapter title (optional)
            - content: Chapter content in markdown (optional)

        Returns:
            - 200: Chapter updated successfully
            - 400: Invalid input or PII detected
            - 401: Not authenticated
            - 403: Not authorized (not the story author)
            - 404: Chapter not found

        Requirements:
            - 5.4: Update draft without affecting publication status
            - 9.1-9.4: PII detection and protection
      parameters:
      - in: path
        name: chapter_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - chapters
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/config/mobile/:
    get:
      operationId: config_mobile_retrieve
      description: |-
        Get mobile configuration for a specific platform and version.

        GET /v1/config/mobile?platform=<ios|android>&version=<version>

        Query parameters:
            - platform: 'ios' or 'android' (required)
            - version: App version string (e.g., '1.2.3') (required)

        Returns:
            200: Mobile configuration with feature flags and settings
            400: Invalid or missing parameters
            403: App version not supported

        Requirements: 16.1, 16.2, 16.5
      tags:
      - config
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
    put:
      operationId: config_mobile_update
      description: |-
        Update mobile configuration for a specific platform (admin only).

        PUT /v1/config/mobile?platform=<ios|android>

        Query parameters:
            - platform: 'ios' or 'android' (required)

        Request body:
            {
                "min_version": "1.0.0",  // optional
                "config": {
                    "features": {
                        "push_notifications": true,
                        "offline_mode": true,
                        ...
                    },
                    "settings": {
                        "max_upload_size_mb": 50,
                        ...
                    },
                    ...
                }
            }

        Returns:
            200: Updated mobile configuration
            400: Invalid request data or missing parameters
            403: User is not an administrator

        Requirements: 16.2, 16.5
      tags:
      - config
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/devices/preferences:
    put:
      operationId: devices_preferences_update
      description: |-
        PUT /v1/devices/preferences - Update device notification preferences

        Body:
            {
                "token": "device_token",
                "enabled": true | false,
                "notification_types": ["reply", "follow", "like"] (optional)
            }

        Returns:
            - 200: Preferences updated successfully
            - 400: Invalid request
            - 401: Not authenticated
            - 404: Device token not found

        Requirements:
            - 4.3: Update notification preferences per device
      tags:
      - devices
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/devices/register:
    post:
      operationId: devices_register_create
      description: |-
        POST /v1/devices/register - Register device token for push notifications

        Body:
            {
                "token": "device_token_from_fcm_or_apns",
                "platform": "ios" | "android",
                "app_version": "1.0.0" (optional)
            }

        Returns:
            - 200: Device token registered successfully
            - 400: Invalid request
            - 401: Not authenticated

        Requirements:
            - 4.1: Register device token for push notifications
            - 4.2: Store token with user and platform information
      tags:
      - devices
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/devices/unregister:
    delete:
      operationId: devices_unregister_destroy
      description: |-
        DELETE /v1/devices/unregister - Unregister device token

        Body:
            {
                "token": "device_token_to_unregister"
            }

        Returns:
            - 200: Device token unregistered successfully
            - 400: Invalid request
            - 401: Not authenticated
            - 404: Device token not found

        Requirements:
            - 4.4: Handle device token deregistration
      tags:
      - devices
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '204':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/discover/:
    get:
      operationId: discover_retrieve
      description: "\n    Retrieve stories from one of three discovery feeds:\n  \
        \  \n    - **Trending**: Stories with high recent engagement (saves, reads,\
        \ likes, whispers)\n    - **New**: Recently published stories ordered by publication\
        \ date\n    - **For You**: Personalized recommendations based on user interests\
        \ (requires authentication)\n    \n    All feeds support filtering by tag\
        \ and search query. Results are cached for performance.\n    "
      summary: Get discovery feed
      parameters:
      - in: query
        name: cursor
        schema:
          type: string
        description: Pagination cursor for next page
      - in: query
        name: page_size
        schema:
          type: integer
        description: Number of items per page (max 100, default 20)
      - in: query
        name: q
        schema:
          type: string
        description: Search query for title, blurb, or author
      - in: query
        name: tab
        schema:
          type: string
          enum:
          - for-you
          - new
          - trending
        description: 'Feed type: trending, new, or for-you'
      - in: query
        name: tag
        schema:
          type: string
        description: Filter by tag slug
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - Discovery
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
              examples:
                DiscoveryFeedResponse:
                  value:
                    data:
                    - id: 123e4567-e89b-12d3-a456-426614174000
                      slug: the-chronicles-of-aether
                      title: The Chronicles of Aether
                      blurb: A fantasy epic about magic and destiny
                      cover_key: covers/uuid-here.jpg
                      author:
                        id: 456e7890-e89b-12d3-a456-426614174000
                        handle: fantasy_writer
                        display_name: Fantasy Writer
                      tags:
                      - fantasy
                      - magic
                      - adventure
                      published_at: '2024-01-15T10:00:00Z'
                    next_cursor: eyJpZCI6IjEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCJ9
                  summary: Discovery Feed Response
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/discover/genre/{genre}/:
    get:
      operationId: discover_genre_retrieve
      description: |-
        GET /v1/discovery/genre/{genre} - Get stories by genre with filters

        Requirements:
            - 25.3: Genre-based browsing
            - 25.4: Filtering by status, word count, update frequency
            - 9.1, 9.4: Include cache headers for offline support
      parameters:
      - in: path
        name: genre
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - discover
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/discover/new-and-noteworthy/:
    get:
      operationId: discover_new_and_noteworthy_retrieve
      description: |-
        GET /v1/discovery/new-and-noteworthy - Get new and noteworthy stories

        Requirements:
            - 25.7: New and noteworthy featuring recent stories with quality signals
            - 9.1, 9.4: Include cache headers for offline support
      tags:
      - discover
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/discover/recommended/:
    get:
      operationId: discover_recommended_retrieve
      description: |-
        GET /v1/discovery/recommended - Get recommended stories for current user

        Requirements:
            - 25.5: Recommendations based on reading history and followed authors
            - 9.1, 9.4: Include cache headers for offline support
      tags:
      - discover
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/discover/rising-authors/:
    get:
      operationId: discover_rising_authors_retrieve
      description: |-
        GET /v1/discovery/rising-authors - Get rising authors

        Requirements:
            - 25.12: Rising authors featuring new authors with growing followings
            - 9.1, 9.4: Include cache headers for offline support
      tags:
      - discover
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/discover/similar/{story_id}/:
    get:
      operationId: discover_similar_retrieve
      description: |-
        GET /v1/discovery/similar/{story_id} - Get similar stories

        Requirements:
            - 25.6: Similar stories based on genre, tags, and reader overlap
            - 9.1, 9.4: Include cache headers for offline support
      parameters:
      - in: path
        name: story_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - discover
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/discover/staff-picks/:
    get:
      operationId: discover_staff_picks_retrieve
      description: |-
        GET /v1/discovery/staff-picks - Get staff-curated stories

        Requirements:
            - 25.10: Staff picks curated by moderators
            - 9.1, 9.4: Include cache headers for offline support
      tags:
      - discover
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/discover/trending/:
    get:
      operationId: discover_trending_retrieve
      description: |-
        GET /v1/discovery/trending - Get trending stories

        Requirements:
            - 25.1, 25.2: Trending feed based on engagement and recency
            - 9.1, 9.4: Include cache headers for offline support

        Query params:
            - limit: Number of stories to return (default: 20)
            - days: Number of days to consider (default: 7)
      tags:
      - discover
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/forgot-password/:
    post:
      operationId: forgot_password_create
      description: "\n    Initiates a password reset request for the given email address.\n\
        \    \n    **Security Features:**\n    - Returns consistent response regardless\
        \ of whether email exists (prevents email enumeration)\n    - Rate limited\
        \ per user (3 requests/hour) and per IP (10 requests/hour)\n    - Generates\
        \ cryptographically secure token\n    - Sends email with reset link\n    \n\
        \    **Requirements:**\n    - 1.1: Accept email address\n    - 1.2: Generate\
        \ secure token\n    - 1.3: Send reset email\n    - 1.4: Prevent email enumeration\n\
        \    - 1.5: Validate email format\n    "
      summary: Request password reset
      tags:
      - Password Reset
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ForgotPasswordRequestRequest'
            examples:
              RequestExample:
                value:
                  email: user@example.com
                summary: Request Example
        required: true
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ForgotPasswordResponse'
              examples:
                SuccessResponse:
                  value:
                    success: true
                    message: If an account exists with this email, you will receive
                      a password reset link.
                  summary: Success Response
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
        '429':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/gdpr/consent/history/:
    get:
      operationId: gdpr_consent_history_retrieve
      description: |-
        Get user's consent history.

        GET /api/consent/history

        Returns:
            200: List of consent records
            500: Server error

        Requirements: 11.11
      tags:
      - gdpr
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/gdpr/consent/withdraw/:
    post:
      operationId: gdpr_consent_withdraw_create
      description: |-
        Withdraw consent for optional data processing.

        POST /api/consent/withdraw

        Request body:
            {
                "consent_type": "analytics" | "marketing"
            }

        Returns:
            200: Consent withdrawn, updated settings
            400: Invalid consent type
            500: Server error

        Requirements: 11.12, 11.13
      tags:
      - gdpr
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/gdpr/delete/:
    post:
      operationId: gdpr_delete_create
      description: |-
        Request account deletion.

        POST /api/gdpr/delete

        Request body:
            {
                "password": "user_password"  // For confirmation
            }

        Returns:
            201: Deletion request created
            400: Invalid request
            500: Server error

        Requirements: 10.6, 10.7
      tags:
      - gdpr
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/gdpr/delete/{deletion_id}/:
    get:
      operationId: gdpr_delete_retrieve
      description: |-
        Get status of an account deletion request.

        GET /api/gdpr/delete/{deletion_id}

        Returns:
            200: Deletion request details
            404: Deletion request not found
            403: User does not own this deletion request

        Requirements: 10.6
      parameters:
      - in: path
        name: deletion_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - gdpr
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/gdpr/delete/{deletion_id}/cancel/:
    post:
      operationId: gdpr_delete_cancel_create
      description: |-
        Cancel a pending account deletion request.

        POST /api/gdpr/delete/{deletion_id}/cancel

        Returns:
            200: Deletion request cancelled
            404: Deletion request not found
            403: User does not own this deletion request
            400: Cannot cancel (already completed or cancelled)

        Requirements: 10.14
      parameters:
      - in: path
        name: deletion_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - gdpr
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/gdpr/export/:
    post:
      operationId: gdpr_export_create
      description: |-
        Request a data export.

        POST /api/gdpr/export

        Returns:
            201: Export request created
            500: Server error

        Requirements: 10.1
      tags:
      - gdpr
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/gdpr/export/{export_id}/:
    get:
      operationId: gdpr_export_retrieve
      description: |-
        Get status of a data export request.

        GET /api/gdpr/export/{export_id}

        Returns:
            200: Export request details
            404: Export request not found
            403: User does not own this export request

        Requirements: 10.1
      parameters:
      - in: path
        name: export_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - gdpr
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/gdpr/privacy/settings/:
    get:
      operationId: gdpr_privacy_settings_retrieve
      description: |-
        Get user's privacy settings.

        GET /api/privacy/settings

        Returns:
            200: Privacy settings
            500: Server error

        Requirements: 11.1
      tags:
      - gdpr
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/gdpr/privacy/settings/update/:
    put:
      operationId: gdpr_privacy_settings_update_update
      description: |-
        Update user's privacy settings.

        PUT /api/privacy/settings

        Request body:
            {
                "profile_visibility": "PUBLIC" | "FOLLOWERS_ONLY" | "PRIVATE",
                "reading_history_visibility": "PUBLIC" | "FOLLOWERS_ONLY" | "PRIVATE",
                "analytics_opt_out": boolean,
                "marketing_emails": boolean,
                "comment_permissions": "ANYONE" | "FOLLOWERS" | "DISABLED",
                "follower_approval_required": "ANYONE" | "APPROVAL_REQUIRED"
            }

        Returns:
            200: Updated privacy settings
            400: Invalid request
            500: Server error

        Requirements: 11.1-11.8, 11.10
      tags:
      - gdpr
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/health/:
    get:
      operationId: health_retrieve
      description: "\n    Check the health status of the MueJam Library API and its\
        \ dependencies.\n    \n    This endpoint verifies:\n    - Database connectivity\
        \ (PostgreSQL)\n    - Cache connectivity (Valkey/Redis)\n    \n    Returns\
        \ HTTP 200 if all systems are operational, HTTP 503 if any dependency is down.\n\
        \    \n    **Note**: This endpoint does not require authentication.\n    "
      summary: System health check
      tags:
      - Health
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
              examples:
                HealthyResponse:
                  value:
                    status: healthy
                    timestamp: '2024-01-20T15:30:00.000000'
                    checks:
                      database: healthy
                      cache: healthy
                  summary: Healthy Response
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '503':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
              examples:
                UnhealthyResponse:
                  value:
                    status: unhealthy
                    timestamp: '2024-01-20T15:30:00.000000'
                    checks:
                      database: healthy
                      cache: 'unhealthy: Connection refused'
                  summary: Unhealthy Response
          description: ''
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/health/admin/pii-config/:
    get:
      operationId: health_admin_pii_config_retrieve
      description: |-
        Get all PII detection configurations.

        GET /api/admin/pii-config

        Returns:
            200: List of PII detection configurations
            403: User is not an administrator

        Requirements: 9.8
      tags:
      - health
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/health/admin/pii-config/{pii_type}/:
    get:
      operationId: health_admin_pii_config_retrieve_2
      description: |-
        Get configuration for a specific PII type.

        GET /api/admin/pii-config/{pii_type}

        Args:
            pii_type: One of EMAIL, PHONE, SSN, CREDIT_CARD

        Returns:
            200: PII detection configuration
            404: Configuration not found
            403: User is not an administrator

        Requirements: 9.8
      parameters:
      - in: path
        name: pii_type
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - health
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/health/admin/pii-config/{pii_type}/update/:
    put:
      operationId: health_admin_pii_config_update_update
      description: |-
        Update configuration for a specific PII type.

        PUT /api/admin/pii-config/{pii_type}

        Request body:
            {
                "sensitivity": "STRICT" | "MODERATE" | "PERMISSIVE",  // optional
                "enabled": true | false,  // optional
                "whitelist": ["pattern1", "pattern2"],  // optional
                "pattern": "custom regex pattern"  // optional
            }

        Args:
            pii_type: One of EMAIL, PHONE, SSN, CREDIT_CARD

        Returns:
            200: Updated configuration
            400: Invalid request data
            403: User is not an administrator

        Requirements: 9.8, 9.9
      parameters:
      - in: path
        name: pii_type
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - health
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/health/admin/pii-config/{pii_type}/whitelist/:
    post:
      operationId: health_admin_pii_config_whitelist_create
      description: |-
        Add patterns to the whitelist for a PII type.

        POST /api/admin/pii-config/{pii_type}/whitelist

        Request body:
            {
                "patterns": ["pattern1", "pattern2"]
            }

        Args:
            pii_type: One of EMAIL, PHONE, SSN, CREDIT_CARD

        Returns:
            200: Updated configuration
            400: Invalid request data
            403: User is not an administrator

        Requirements: 9.9
      parameters:
      - in: path
        name: pii_type
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - health
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/health/admin/pii-config/{pii_type}/whitelist/remove/:
    delete:
      operationId: health_admin_pii_config_whitelist_remove_destroy
      description: |-
        Remove patterns from the whitelist for a PII type.

        DELETE /api/admin/pii-config/{pii_type}/whitelist

        Request body:
            {
                "patterns": ["pattern1", "pattern2"]
            }

        Args:
            pii_type: One of EMAIL, PHONE, SSN, CREDIT_CARD

        Returns:
            200: Updated configuration
            400: Invalid request data
            403: User is not an administrator

        Requirements: 9.9
      parameters:
      - in: path
        name: pii_type
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - health
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '204':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/health/admin/pii-config/initialize/:
    post:
      operationId: health_admin_pii_config_initialize_create
      description: |-
        Initialize default PII detection configurations.

        POST /api/admin/pii-config/initialize

        Returns:
            200: Configurations initialized
            403: User is not an administrator

        Requirements: 9.8
      tags:
      - health
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/health/api-keys/:
    post:
      operationId: health_api_keys_create
      description: |-
        Create a new API key for the authenticated user.

        Request body:
            - name (str, required): A descriptive name for the API key
            - expires_in_days (int, optional): Number of days until expiration (default: 365)
            - permissions (dict, optional): Scoped permissions for the key

        Response:
            - id (str): The API key ID
            - name (str): The API key name
            - api_key (str): The plain text API key (only shown once!)
            - created_at (str): Creation timestamp
            - expires_at (str): Expiration timestamp

        Status codes:
            - 201: API key created successfully
            - 400: Invalid request data
            - 401: User not authenticated
      tags:
      - health
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/health/api-keys/{key_id}/revoke/:
    delete:
      operationId: health_api_keys_revoke_destroy
      description: |-
        Revoke an API key by marking it as inactive.

        Path parameters:
            - key_id (str): The ID of the API key to revoke

        Response:
            - message (str): Success message

        Status codes:
            - 200: API key revoked successfully
            - 401: User not authenticated
            - 403: User doesn't own this API key
            - 404: API key not found
      parameters:
      - in: path
        name: key_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - health
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '204':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/health/api-keys/{key_id}/rotate/:
    post:
      operationId: health_api_keys_rotate_create
      description: |-
        Rotate an existing API key by generating a new key value.

        Path parameters:
            - key_id (str): The ID of the API key to rotate

        Response:
            - id (str): The API key ID
            - name (str): The API key name
            - api_key (str): The new plain text API key (only shown once!)
            - created_at (str): Original creation timestamp
            - expires_at (str): Expiration timestamp

        Status codes:
            - 200: API key rotated successfully
            - 401: User not authenticated
            - 403: User doesn't own this API key
            - 404: API key not found
      parameters:
      - in: path
        name: key_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - health
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/health/api-keys/list/:
    get:
      operationId: health_api_keys_list_retrieve
      description: |-
        List all API keys for the authenticated user.

        Query parameters:
            - include_inactive (bool, optional): Include inactive keys (default: false)

        Response:
            List of API key objects (without the actual key values):
            - id (str): The API key ID
            - name (str): The API key name
            - created_at (str): Creation timestamp
            - last_used_at (str): Last usage timestamp
            - expires_at (str): Expiration timestamp
            - is_active (bool): Whether the key is active
            - permissions (dict): Scoped permissions

        Status codes:
            - 200: Success
            - 401: User not authenticated
      tags:
      - health
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/help/admin/analytics/:
    get:
      operationId: help_admin_analytics_retrieve
      description: 'Admin: Get help analytics'
      tags:
      - help
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/help/admin/articles/:
    get:
      operationId: help_admin_articles_retrieve
      description: 'Admin: List all help articles'
      tags:
      - help
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
    post:
      operationId: help_admin_articles_create
      description: Create new help article
      tags:
      - help
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/help/admin/articles/{article_id}/:
    put:
      operationId: help_admin_articles_update
      description: Update help article
      parameters:
      - in: path
        name: article_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - help
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
    delete:
      operationId: help_admin_articles_destroy
      description: Delete help article
      parameters:
      - in: path
        name: article_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - help
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '204':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/help/admin/articles/{article_id}/publish/:
    post:
      operationId: help_admin_articles_publish_create
      description: 'Admin: Publish help article'
      parameters:
      - in: path
        name: article_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - help
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/help/articles/:
    get:
      operationId: help_articles_retrieve
      description: List help articles by category
      tags:
      - help
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/help/articles/{article_id}/feedback/:
    post:
      operationId: help_articles_feedback_create
      description: Submit feedback for help article
      parameters:
      - in: path
        name: article_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - help
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/help/articles/{slug}/:
    get:
      operationId: help_articles_retrieve_2
      description: Get help article by slug
      parameters:
      - in: path
        name: slug
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - help
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/help/categories/:
    get:
      operationId: help_categories_retrieve
      description: Get all help article categories
      tags:
      - help
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/help/search/:
    get:
      operationId: help_search_retrieve
      description: Search help articles
      tags:
      - help
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/help/support/:
    post:
      operationId: help_support_create
      description: Submit support request
      tags:
      - help
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/highlights/:
    get:
      operationId: highlights_retrieve
      description: |-
        List all highlights for the authenticated user with story/chapter metadata.

        GET /v1/highlights?story_id=<id>&start_date=<YYYY-MM-DD>&end_date=<YYYY-MM-DD>&cursor=<id>&page_size=20
      tags:
      - highlights
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/highlights/{highlight_id}:
    delete:
      operationId: highlights_destroy
      description: |-
        Delete a highlight.

        DELETE /v1/highlights/{id}

        Returns:
            - 204: Highlight deleted successfully
            - 401: Not authenticated
            - 403: Not authorized (not the highlight owner)
            - 404: Highlight not found

        Requirements:
            - 8.5: Delete highlight
      parameters:
      - in: path
        name: highlight_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - highlights
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '204':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/legal/consent:
    post:
      operationId: legal_consent_create
      description: |-
        Record user consent for a legal document.

        Request Body:
            - document_id: ID of the legal document

        Returns:
            Created consent record

        Requirements:
            - 1.7: Store user consent records with timestamps
            - 1.8: Record consent changes with timestamp
      tags:
      - legal
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/legal/consent/status:
    get:
      operationId: legal_consent_status_retrieve
      description: |-
        Get user's consent status for all legal documents.

        Returns:
            List of consent status for each document type

        Requirements:
            - 1.7: Store user consent records with timestamps
      tags:
      - legal
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/legal/cookie-consent:
    put:
      operationId: legal_cookie_consent_update
      description: |-
        Update cookie consent preferences.

        Request Body:
            - analytics: Boolean for analytics cookies consent
            - marketing: Boolean for marketing cookies consent

        Returns:
            Updated cookie consent record

        Requirements:
            - 1.6: Display Cookie Consent banner with granular consent options
            - 1.8: Record consent changes with timestamp
      tags:
      - legal
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/legal/dmca/requests:
    get:
      operationId: legal_dmca_requests_retrieve
      description: |-
        Get all DMCA takedown requests for the dashboard.

        Query Parameters:
            - status: Filter by status (PENDING, APPROVED, REJECTED)

        Returns:
            List of DMCA takedown requests

        Requirements:
            - 31.6: Provide DMCA agent dashboard for reviewing requests
      tags:
      - legal
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/legal/dmca/requests/{request_id}/review:
    post:
      operationId: legal_dmca_requests_review_create
      description: |-
        Review a DMCA takedown request (approve or reject).

        Path Parameters:
            - request_id: ID of the DMCA request

        Request Body:
            - action: 'approve' or 'reject'
            - reason: Optional reason for rejection

        Returns:
            Updated DMCA request

        Requirements:
            - 31.6: Provide DMCA agent dashboard
            - 31.7: Implement content takedown on approval
            - 31.8: Notify content author
      parameters:
      - in: path
        name: request_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - legal
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/legal/dmca/submit:
    post:
      operationId: legal_dmca_submit_create
      description: |-
        Submit a DMCA takedown request.

        Request Body:
            - copyright_holder: Name of the copyright holder
            - contact_info: Contact information
            - copyrighted_work_description: Description of copyrighted work
            - infringing_url: URL of infringing content
            - good_faith_statement: Confirmation of good faith belief
            - signature: Electronic signature

        Returns:
            Created DMCA takedown request

        Requirements:
            - 31.1: Provide DMCA takedown request form
            - 31.2: Require specific fields in DMCA requests
            - 31.3: Require electronic signature
            - 31.4: Send confirmation email to requester
            - 31.5: Notify designated DMCA agent
      tags:
      - legal
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/legal/documents/{document_type}:
    get:
      operationId: legal_documents_retrieve
      description: |-
        Get the current active legal document by type.

        Path Parameters:
            - document_type: Type of document ('TOS', 'PRIVACY', 'CONTENT_POLICY', 'DMCA')

        Returns:
            Legal document data

        Requirements:
            - 1.1: Display Terms of Service
            - 1.2: Display Privacy Policy compliant with GDPR and CCPA
            - 1.3: Provide DMCA takedown request process
            - 1.5: Display Content Policy
            - 1.9: Make all legal documents accessible from footer
      parameters:
      - in: path
        name: document_type
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - legal
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/legal/verify-age:
    post:
      operationId: legal_verify_age_create
      description: |-
        Verify user's age for COPPA compliance.

        Request Body:
            - age: User's age in years (must be >= 13)

        Returns:
            Success message with age verification status

        Requirements:
            - 1.4: Implement age verification requiring users to confirm they are 13 years or older
      tags:
      - legal
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/library/:
    get:
      operationId: library_retrieve
      description: |-
        Get all shelves with their stories.

        GET /v1/library

        Returns:
            - 200: List of shelves with stories
            - 401: Not authenticated

        Requirements:
            - 4.4: Get all shelves with stories
      tags:
      - library
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/library/shelves:
    get:
      operationId: library_shelves_retrieve
      description: |-
        List user's shelves or create a new shelf.

        GET /v1/library/shelves - List user's shelves
        POST /v1/library/shelves - Create new shelf
      tags:
      - library
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
    post:
      operationId: library_shelves_create
      description: |-
        List user's shelves or create a new shelf.

        GET /v1/library/shelves - List user's shelves
        POST /v1/library/shelves - Create new shelf
      tags:
      - library
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/library/shelves/{shelf_id}:
    put:
      operationId: library_shelves_update
      description: |-
        Update a shelf (rename).

        PUT /v1/library/shelves/{id}

        Request body:
            - name: New shelf name (required)

        Returns:
            - 200: Shelf updated successfully
            - 400: Invalid input
            - 401: Not authenticated
            - 403: Not authorized (not the shelf owner)
            - 404: Shelf not found

        Requirements:
            - 4.7: Rename shelf
      parameters:
      - in: path
        name: shelf_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - library
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/library/shelves/{shelf_id}/delete:
    delete:
      operationId: library_shelves_delete_destroy
      description: |-
        Delete a shelf and all its items.

        DELETE /v1/library/shelves/{id}

        Returns:
            - 204: Shelf deleted successfully
            - 401: Not authenticated
            - 403: Not authorized (not the shelf owner)
            - 404: Shelf not found

        Requirements:
            - 4.5: Delete shelf removes ShelfItems
      parameters:
      - in: path
        name: shelf_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - library
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '204':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/library/shelves/{shelf_id}/items:
    post:
      operationId: library_shelves_items_create
      description: |-
        Add a story to a shelf.

        POST /v1/library/shelves/{id}/items

        Request body:
            - story_id: ID of the story to add (required)

        Returns:
            - 201: Story added to shelf successfully
            - 400: Invalid input
            - 401: Not authenticated
            - 403: Not authorized (not the shelf owner)
            - 404: Shelf or story not found
            - 409: Story already in shelf

        Requirements:
            - 4.2: Add story to shelf
      parameters:
      - in: path
        name: shelf_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - library
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/library/shelves/{shelf_id}/items/{story_id}:
    delete:
      operationId: library_shelves_items_destroy
      description: |-
        Remove a story from a shelf.

        DELETE /v1/library/shelves/{id}/items/{story_id}

        Returns:
            - 204: Story removed from shelf successfully
            - 401: Not authenticated
            - 403: Not authorized (not the shelf owner)
            - 404: Shelf or story not found in shelf

        Requirements:
            - 4.3: Remove story from shelf
      parameters:
      - in: path
        name: shelf_id
        schema:
          type: string
        required: true
      - in: path
        name: story_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - library
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '204':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/notifications/:
    get:
      operationId: notifications_retrieve
      description: |-
        GET /v1/notifications - List notifications for current user

        Query parameters:
            - cursor: Pagination cursor
            - page_size: Number of results (default 20, max 100)

        Returns:
            - 200: List of notifications
            - 401: Not authenticated

        Requirements:
            - 12.3: List notifications ordered by creation time descending
      tags:
      - notifications
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/notifications/{id}/read:
    post:
      operationId: notifications_read_create
      description: |-
        POST /v1/notifications/{id}/read - Mark notification as read

        Returns:
            - 200: Notification marked as read
            - 401: Not authenticated
            - 404: Notification not found

        Requirements:
            - 12.4: Mark notification as read
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - notifications
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/notifications/preferences:
    get:
      operationId: notifications_preferences_retrieve
      description: |-
        GET /api/notifications/preferences - Get notification preferences

        Returns:
            - 200: Notification preferences
            - 401: Not authenticated

        Requirements:
            - 21.9: Retrieve user notification preferences
      tags:
      - notifications
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/notifications/preferences/update:
    put:
      operationId: notifications_preferences_update_update
      description: |-
        PUT /api/notifications/preferences - Update notification preferences

        Body:
            {
                "new_comment": "immediate" | "daily_digest" | "weekly_digest" | "disabled",
                "new_like": "immediate" | "daily_digest" | "weekly_digest" | "disabled",
                "new_follower": "immediate" | "daily_digest" | "weekly_digest" | "disabled",
                "new_content": "immediate" | "daily_digest" | "weekly_digest" | "disabled",
                "marketing_emails": true | false
            }

        Returns:
            - 200: Updated preferences
            - 400: Invalid request
            - 401: Not authenticated

        Requirements:
            - 21.9: Allow users to configure notification preferences
            - 21.10: Support per-notification-type frequency settings
      tags:
      - notifications
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/notifications/read-all:
    post:
      operationId: notifications_read_all_create
      description: |-
        POST /v1/notifications/read-all - Mark all notifications as read

        Returns:
            - 200: All notifications marked as read
            - 401: Not authenticated

        Requirements:
            - 12.4: Mark all notifications as read
      tags:
      - notifications
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/onboarding/complete/:
    post:
      operationId: onboarding_complete_create
      description: Mark onboarding as complete
      tags:
      - onboarding
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/onboarding/progress/:
    get:
      operationId: onboarding_progress_retrieve
      description: Get current onboarding progress
      tags:
      - onboarding
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/onboarding/skip/:
    post:
      operationId: onboarding_skip_create
      description: Skip onboarding
      tags:
      - onboarding
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/onboarding/step/:
    post:
      operationId: onboarding_step_create
      description: Update onboarding step
      tags:
      - onboarding
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/reports/:
    post:
      operationId: reports_create
      description: |-
        Submit a report for content moderation.

        Request Body:
            - content_type: Type of content ('story', 'chapter', 'whisper', 'user')
            - content_id: ID of the content being reported
            - reason: Reason for reporting (max 500 characters)

        Returns:
            Created report data

        Requirements:
            - 13.1: Report stories
            - 13.2: Report chapters
            - 13.3: Report whispers
            - 13.4: Report users
            - 13.5: Store report with reason and status
            - 13.6: Prevent duplicate reports
            - 13.7: Validate reason text (max 500 characters)
      tags:
      - reports
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/reports/actions/:
    post:
      operationId: reports_actions_create
      description: |-
        Take a moderation action on a report.

        Permission requirements:
        - DISMISS: Moderators (low-priority only), Senior Moderators, Administrators
        - WARN: Senior Moderators, Administrators
        - HIDE: Senior Moderators, Administrators
        - DELETE: Administrators only
        - SUSPEND: Administrators only

        Request Body:
            - report_id: ID of the report
            - action_type: Type of action (DISMISS, WARN, HIDE, DELETE, SUSPEND)
            - reason: Reason for the action

        Returns:
            Created moderation action data

        Requirements:
            - 2.4: Support actions: dismiss, warn, hide, delete, suspend
            - 2.5: Require dismissal reason
            - 2.6: Immediately remove content from public view for hide/delete
            - 2.7: Record all moderation actions in audit log
            - 3.3: Senior_Moderators can review reports, hide content, and warn users
            - 3.4: Moderators can review reports and dismiss low-priority reports only
            - 3.5: Only Administrators can delete content, suspend users
            - 3.6: Return 403 for unauthorized access
      tags:
      - reports
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/reports/filters/:
    get:
      operationId: reports_filters_retrieve
      description: |-
        Get all filter configurations.

        Restricted to administrators only.

        Returns:
            List of all filter configurations with their settings

        Requirements:
            - 4.8: Allow administrators to configure filter sensitivity levels
            - 4.9: Maintain a whitelist for false positive terms
      tags:
      - reports
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/reports/filters/{filter_type}/:
    get:
      operationId: reports_filters_retrieve_2
      description: |-
        Get configuration for a specific filter type.

        Restricted to administrators only.

        Args:
            filter_type: Type of filter (PROFANITY, SPAM, HATE_SPEECH)

        Returns:
            Filter configuration data

        Requirements:
            - 4.8: Allow administrators to configure filter sensitivity levels
            - 4.9: Maintain a whitelist for false positive terms
      parameters:
      - in: path
        name: filter_type
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - reports
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/reports/filters/{filter_type}/update/:
    put:
      operationId: reports_filters_update_update
      description: |-
        Update configuration for a specific filter type.

        Restricted to administrators only.

        Args:
            filter_type: Type of filter (PROFANITY, SPAM, HATE_SPEECH)

        Request Body:
            - sensitivity: Filter sensitivity level (STRICT, MODERATE, PERMISSIVE) [optional]
            - enabled: Whether the filter is enabled [optional]
            - whitelist: List of terms to ignore [optional]
            - blacklist: List of additional terms to flag [optional]

        Returns:
            Updated filter configuration data

        Requirements:
            - 4.8: Allow administrators to configure filter sensitivity levels
            - 4.9: Maintain a whitelist for false positive terms
            - 4.10: Log all automated filtering actions for review and tuning
      parameters:
      - in: path
        name: filter_type
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - reports
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
    patch:
      operationId: reports_filters_update_partial_update
      description: |-
        Update configuration for a specific filter type.

        Restricted to administrators only.

        Args:
            filter_type: Type of filter (PROFANITY, SPAM, HATE_SPEECH)

        Request Body:
            - sensitivity: Filter sensitivity level (STRICT, MODERATE, PERMISSIVE) [optional]
            - enabled: Whether the filter is enabled [optional]
            - whitelist: List of terms to ignore [optional]
            - blacklist: List of additional terms to flag [optional]

        Returns:
            Updated filter configuration data

        Requirements:
            - 4.8: Allow administrators to configure filter sensitivity levels
            - 4.9: Maintain a whitelist for false positive terms
            - 4.10: Log all automated filtering actions for review and tuning
      parameters:
      - in: path
        name: filter_type
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - reports
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/reports/moderators/:
    get:
      operationId: reports_moderators_retrieve
      description: |-
        Get list of all moderators with their roles and activity statistics.

        Restricted to administrators only.

        Returns:
            List of moderators with:
            - User information
            - Role type
            - Assignment details
            - Activity statistics

        Requirements:
            - 3.5: Only Administrators can assign moderator roles
            - 3.6: Return 403 for unauthorized access
            - 3.8: Display list of all moderators with their roles and activity statistics
      tags:
      - reports
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/reports/moderators/{moderator_id}/:
    delete:
      operationId: reports_moderators_destroy
      description: |-
        Remove a moderator role (deactivate).

        Restricted to administrators only.

        Args:
            moderator_id: ID of the moderator role to remove

        Returns:
            Success message

        Requirements:
            - 3.5: Only Administrators can assign moderator roles
            - 3.6: Return 403 for unauthorized access
            - 3.7: Log all role assignments and permission changes
      parameters:
      - in: path
        name: moderator_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - reports
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '204':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/reports/moderators/assign/:
    post:
      operationId: reports_moderators_assign_create
      description: |-
        Assign a moderator role to a user.

        Restricted to administrators only.

        Request Body:
            - user_id: ID of the user to assign role
            - role: Type of role (MODERATOR, SENIOR_MODERATOR, ADMINISTRATOR)

        Returns:
            Created moderator role data

        Requirements:
            - 3.1: Support role types: ADMINISTRATOR, SENIOR_MODERATOR, MODERATOR
            - 3.2: Grant access to moderation dashboard when role is assigned
            - 3.5: Only Administrators can assign moderator roles
            - 3.6: Return 403 for unauthorized access
            - 3.7: Log all role assignments in audit log
      tags:
      - reports
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/reports/nsfw/override/:
    post:
      operationId: reports_nsfw_override_create
      description: |-
        Override NSFW classification for content (moderator action).

        Requires any active moderator role.

        Request Body:
            - content_type: Type of content (STORY, CHAPTER, WHISPER, IMAGE)
            - content_id: ID of the content
            - is_nsfw: New NSFW status (true or false)

        Returns:
            Updated NSFW flag data

        Requirements:
            - 8.8: Allow moderators to override automatic NSFW classifications
            - 8.10: Log all NSFW detection events
            - 3.2: Grant access to moderation dashboard when role is assigned
            - 3.6: Return 403 for unauthorized access
      tags:
      - reports
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/reports/nsfw/preference/:
    get:
      operationId: reports_nsfw_preference_retrieve
      description: |-
        Get user's NSFW content preference.

        Returns:
            User's NSFW preference (SHOW_ALL, BLUR_NSFW, or HIDE_NSFW)

        Requirements:
            - 8.5: Allow users to set content preferences
      tags:
      - reports
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/reports/nsfw/preference/update/:
    put:
      operationId: reports_nsfw_preference_update_update
      description: |-
        Update user's NSFW content preference.

        Request Body:
            - nsfw_preference: Preference value (SHOW_ALL, BLUR_NSFW, or HIDE_NSFW)

        Returns:
            Updated preference data

        Requirements:
            - 8.5: Allow users to set content preferences
      tags:
      - reports
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/reports/queue/:
    get:
      operationId: reports_queue_retrieve
      description: |-
        Get all pending reports sorted by priority and creation date.

        Requires any active moderator role.

        Returns:
            List of reports with priority scores and levels

        Requirements:
            - 2.1: Display all pending reports in moderation queue
            - 2.2: Sort reports by priority (high, medium, low) and creation date
            - 3.2: Grant access to moderation dashboard when role is assigned
            - 3.6: Return 403 for unauthorized access
      tags:
      - reports
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/reports/reports/{report_id}/:
    get:
      operationId: reports_reports_retrieve
      description: |-
        Get detailed information about a specific report.

        Requires any active moderator role.

        Returns:
            Report details including:
            - Report information
            - Reported content with full context
            - Reporter information and history
            - Content metadata

        Requirements:
            - 2.3: Display reported content, reporter reason, content metadata, and reporter history
            - 3.2: Grant access to moderation dashboard when role is assigned
            - 3.6: Return 403 for unauthorized access
      parameters:
      - in: path
        name: report_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - reports
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/reports/stats/:
    get:
      operationId: reports_stats_retrieve
      description: |-
        Get moderation performance metrics.

        Requires any active moderator role.

        Returns:
            Moderation statistics including:
            - Reports reviewed
            - Average response time
            - Action distribution
            - Pending reports count

        Requirements:
            - 2.9: Display moderator performance metrics
            - 3.2: Grant access to moderation dashboard when role is assigned
            - 3.6: Return 403 for unauthorized access
      tags:
      - reports
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/reset-password/:
    post:
      operationId: reset_password_create
      description: "\n    Completes the password reset process with a valid token\
        \ and new password.\n    \n    **Validation:**\n    - Token must be valid\
        \ and not expired\n    - Password must match confirmation\n    - Password\
        \ must meet security requirements:\n      - Minimum 8 characters\n      -\
        \ At least one uppercase letter\n      - At least one lowercase letter\n \
        \     - At least one number\n      - At least one special character\n    \
        \  - Cannot match previous password\n      - Cannot be a common/weak password\n\
        \    \n    **Side Effects:**\n    - Updates user password\n    - Invalidates\
        \ all user sessions\n    - Sends confirmation email\n    \n    **Requirements:**\n\
        \    - 5.1: Validate password requirements\n    - 5.2: Update password\n \
        \   - 5.3: Validate password confirmation\n    - 5.4: Invalidate token and\
        \ sessions\n    - 5.5: Send confirmation email\n    "
      summary: Complete password reset
      tags:
      - Password Reset
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResetPasswordRequestRequest'
            examples:
              RequestExample:
                value:
                  token: abc123def456...
                  password: NewSecure123!
                  confirm_password: NewSecure123!
                summary: Request Example
        required: true
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResetPasswordResponse'
              examples:
                SuccessResponse:
                  value:
                    success: true
                    message: Password has been reset successfully
                  summary: Success Response
                ErrorResponse:
                  value:
                    success: false
                    message: Password reset failed
                    errors:
                    - Password must contain at least one uppercase letter
                  summary: Error Response
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/reset-password/{token}/:
    get:
      operationId: reset_password_retrieve
      description: "\n    Validates a password reset token from the email link.\n\
        \    \n    **Returns:**\n    - Valid token: Returns success with valid=true\n\
        \    - Invalid/expired token: Returns error with valid=false and reason\n\
        \    \n    **Requirements:**\n    - 4.1: Validate token\n    - 4.2: Return\
        \ form display or error\n    - 4.3: Handle invalid tokens\n    "
      summary: Validate reset token
      parameters:
      - in: path
        name: token
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - Password Reset
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidateTokenResponse'
              examples:
                ValidTokenResponse:
                  value:
                    valid: true
                    message: Token is valid
                  summary: Valid Token Response
                InvalidTokenResponse:
                  value:
                    valid: false
                    message: Token is invalid or expired
                  summary: Invalid Token Response
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/search/:
    get:
      operationId: search_retrieve
      description: Backward-compatible search endpoint for /v1/search/.
      tags:
      - search
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/search/authors:
    get:
      operationId: search_authors_retrieve
      description: |-
        Search authors with full-text search.

        GET /api/search/authors?q=query&page=1

        Query Parameters:
        - q: Search query (required)
        - page: Page number (default: 1)

        Requirements: 35.3, 35.4, 35.8
      tags:
      - search
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/search/autocomplete:
    get:
      operationId: search_autocomplete_retrieve
      description: |-
        Get autocomplete suggestions for search query.

        GET /api/search/autocomplete?q=query&limit=10

        Query Parameters:
        - q: Partial search query (required)
        - limit: Maximum number of suggestions (default: 10)

        Requirements: 35.6
      tags:
      - search
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/search/popular:
    get:
      operationId: search_popular_retrieve
      description: |-
        Get popular search queries.

        GET /api/search/popular?days=7&limit=20

        Query Parameters:
        - days: Number of days to look back (default: 7)
        - limit: Maximum number of results (default: 20)

        Requirements: 35.10
      tags:
      - search
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/search/stories:
    get:
      operationId: search_stories_retrieve
      description: |-
        Search stories with full-text search and filters.

        GET /api/search/stories?q=query&genre=Fantasy&page=1

        Query Parameters:
        - q: Search query (required)
        - genre: Filter by genre (optional)
        - completion_status: Filter by completion status (optional)
        - min_word_count: Minimum word count (optional)
        - max_word_count: Maximum word count (optional)
        - updated_after: Filter by update date (ISO format, optional)
        - updated_before: Filter by update date (ISO format, optional)
        - page: Page number (default: 1)

        Requirements: 35.3, 35.4, 35.5, 35.8
      tags:
      - search
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/search/suggest:
    get:
      operationId: search_suggest_retrieve
      description: Backward-compatible suggest endpoint for /v1/search/suggest.
      tags:
      - search
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/search/track-click:
    post:
      operationId: search_track_click_create
      description: |-
        Track when a user clicks on a search result.

        POST /api/search/track-click

        Request Body:
        {
            "query": "search query",
            "result_id": 123,
            "result_type": "story"
        }

        Requirements: 35.10
      tags:
      - search
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/security/certificate/fingerprints:
    get:
      operationId: security_certificate_fingerprints_retrieve
      description: |-
        Get certificate fingerprints for certificate pinning.

        This endpoint allows mobile clients to retrieve the current SSL/TLS
        certificate fingerprints for the API server. Mobile apps can use these
        fingerprints to implement certificate pinning, protecting against
        man-in-the-middle attacks.

        Requirements: 11.1, 11.2

        Returns:
            200 OK: Certificate fingerprints in multiple hash formats
            {
                "sha256": ["AA:BB:CC:..."],
                "sha1": ["AA:BB:CC:..."],
                "domain": "api.muejam.com",
                "valid_until": "2025-12-31T23:59:59Z",
                "subject": {"CN": "api.muejam.com"},
                "issuer": {"CN": "Let's Encrypt Authority X3"}
            }

            500 Internal Server Error: Error retrieving certificate
      tags:
      - security
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/security/certificate/verify:
    post:
      operationId: security_certificate_verify_create
      description: |-
        Verify a certificate fingerprint.

        This endpoint allows mobile clients to verify a fingerprint they have
        against the current server certificate. This can be used for testing
        certificate pinning implementations.

        Requirements: 11.1, 11.4

        Request body:
            {
                "fingerprint": "AA:BB:CC:DD:...",
                "algorithm": "sha256"  // optional, defaults to sha256
            }

        Returns:
            200 OK: Fingerprint verification result
            {
                "valid": true,
                "algorithm": "sha256",
                "message": "Fingerprint matches current certificate"
            }

            400 Bad Request: Invalid request format
      tags:
      - security
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/status/:
    get:
      operationId: status_retrieve
      description: |-
        Get current platform status.

        Returns:
            - components: List of component statuses
            - overall_status: Overall platform status
            - incidents: Recent incidents
            - maintenance: Scheduled maintenance
            - last_updated: Timestamp
      tags:
      - status
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/status/components/{component_id}:
    get:
      operationId: status_components_retrieve
      description: |-
        Get detailed component status including uptime.

        Returns:
            - component: Component details
            - uptime: Uptime percentages for 30, 60, 90 days
      parameters:
      - in: path
        name: component_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - status
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/status/health-check:
    post:
      operationId: status_health_check_create
      description: |-
        Trigger manual health check.

        Returns:
            Health check results
      tags:
      - status
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/status/incidents:
    get:
      operationId: status_incidents_retrieve
      description: |-
        Get incident history.

        Query Parameters:
            days: Number of days to look back (default 90)

        Returns:
            List of incidents with details
      tags:
      - status
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/status/incidents/{incident_id}/resolve:
    post:
      operationId: status_incidents_resolve_create
      description: |-
        Resolve an incident.

        Request Body:
            - root_cause: Root cause description
            - resolution: Resolution description

        Returns:
            Success message
      parameters:
      - in: path
        name: incident_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - status
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/status/incidents/{incident_id}/updates:
    post:
      operationId: status_incidents_updates_create
      description: |-
        Add an update to an incident.

        Request Body:
            - message: Update message
            - status: New incident status (optional)
            - estimated_resolution: ETA for resolution (optional)

        Returns:
            Created update data
      parameters:
      - in: path
        name: incident_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - status
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/status/incidents/create:
    post:
      operationId: status_incidents_create_create
      description: |-
        Create a new incident.

        Request Body:
            - title: Incident title
            - description: Incident description
            - severity: Severity level (minor, major, critical)
            - affected_components: List of component IDs

        Returns:
            Created incident data
      tags:
      - status
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/status/maintenance:
    get:
      operationId: status_maintenance_retrieve
      description: |-
        Get scheduled maintenance windows.

        Returns:
            List of scheduled maintenance windows
      tags:
      - status
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/status/rss:
    get:
      operationId: status_rss_retrieve
      description: |-
        Generate RSS feed for status updates.

        Returns:
            RSS feed XML
      tags:
      - status
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/stories/:
    get:
      operationId: stories_list
      description: "\n    **GET**: List published stories with optional filters (tag,\
        \ author, search query).\n    Supports cursor-based pagination for infinite\
        \ scroll.\n    \n    **POST**: Create a new story draft. Requires authentication.\n\
        \    Story will be created in draft state (published=false).\n    "
      summary: List stories or create new story
      parameters:
      - in: query
        name: author_id
        schema:
          type: string
          format: uuid
        description: Filter stories by author ID
      - in: query
        name: cursor
        schema:
          type: string
        description: Pagination cursor for next page
      - in: query
        name: page_size
        schema:
          type: integer
        description: Number of items per page (max 100, default 20)
      - in: query
        name: search
        schema:
          type: string
        description: Search stories by title, blurb, or author name
      - in: query
        name: tag
        schema:
          type: string
        description: Filter stories by tag slug
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - Stories
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/StoryList'
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StoryDetail'
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '401':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
    post:
      operationId: stories_create
      description: "\n    **GET**: List published stories with optional filters (tag,\
        \ author, search query).\n    Supports cursor-based pagination for infinite\
        \ scroll.\n    \n    **POST**: Create a new story draft. Requires authentication.\n\
        \    Story will be created in draft state (published=false).\n    "
      summary: List stories or create new story
      parameters:
      - in: query
        name: author_id
        schema:
          type: string
          format: uuid
        description: Filter stories by author ID
      - in: query
        name: cursor
        schema:
          type: string
        description: Pagination cursor for next page
      - in: query
        name: page_size
        schema:
          type: integer
        description: Number of items per page (max 100, default 20)
      - in: query
        name: search
        schema:
          type: string
        description: Search stories by title, blurb, or author name
      - in: query
        name: tag
        schema:
          type: string
        description: Filter stories by tag slug
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - Stories
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StoryCreateRequest'
            examples:
              CreateStoryRequest:
                value:
                  title: The Chronicles of Aether
                  blurb: A fantasy epic about magic and destiny
                  cover_key: covers/uuid-here.jpg
                summary: Create Story Request
        required: true
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/StoryList'
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StoryDetail'
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '401':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/stories/{slug}:
    get:
      operationId: stories_retrieve
      description: |-
        Get a story by its slug.

        GET /v1/stories/{slug}

        Returns:
            - 200: Story details
            - 304: Not Modified (if content hasn't changed)
            - 404: Story not found or deleted
            - 403: Access denied (blocked author)

        Requirements:
            - 5.1: Get story by slug
            - 3.9: Hide content from blocked authors
            - 9.2: Support conditional requests
            - 9.3: Return 304 Not Modified when appropriate
      parameters:
      - in: path
        name: slug
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - stories
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/stories/{story_id}/chapters:
    get:
      operationId: stories_chapters_retrieve
      description: |-
        List chapters for a story.

        GET /v1/stories/{id}/chapters

        Query parameters:
            - cursor: Pagination cursor (optional)
            - page_size: Number of results (default 20, max 100)

        Returns:
            - 200: List of chapters
            - 404: Story not found

        Requirements:
            - 5.2: List chapters for a story
            - 9.1: Include cache headers for offline support
            - 9.4: Include cache-control headers for mobile caching
      parameters:
      - in: path
        name: story_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - stories
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/stories/{story_id}/chapters/create:
    post:
      operationId: stories_chapters_create_create
      description: |-
        Create a new chapter draft.

        POST /v1/stories/{id}/chapters

        Request body:
            - title: Chapter title (required)
            - content: Chapter content in markdown (required)
            - chapter_number: Chapter number (required)

        Returns:
            - 201: Chapter created successfully
            - 400: Invalid input, PII detected, or content blocked by filters
            - 401: Not authenticated
            - 403: Not authorized (not the story author)
            - 404: Story not found
            - 409: Chapter number already exists

        Requirements:
            - 5.2: Create chapter draft with published=false
            - 4.1: Filter profanity
            - 4.2: Block spam patterns
            - 4.3: Return appropriate errors for blocked content
            - 4.4: Create high-priority reports for hate speech
            - 9.1-9.4: PII detection and protection
      parameters:
      - in: path
        name: story_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - stories
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/stories/{story_id}/delete:
    delete:
      operationId: stories_delete_destroy
      description: |-
        Soft delete a story.

        DELETE /v1/stories/{id}

        Returns:
            - 204: Story deleted successfully
            - 401: Not authenticated
            - 403: Not authorized (not the author)
            - 404: Story not found

        Requirements:
            - 5.6: Soft delete by setting deleted_at timestamp
      parameters:
      - in: path
        name: story_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - stories
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '204':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/stories/{story_id}/publish:
    post:
      operationId: stories_publish_create
      description: |-
        Publish a story.

        POST /v1/stories/{id}/publish

        Returns:
            - 200: Story published successfully
            - 401: Not authenticated
            - 403: Not authorized (not the author)
            - 404: Story not found
            - 429: Rate limit exceeded

        Requirements:
            - 5.3: Set published=true and record publication timestamp
            - 5.8: Enforce rate limit of 5 publish operations per hour
      parameters:
      - in: path
        name: story_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - stories
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/stories/{story_id}/update:
    put:
      operationId: stories_update_update
      description: |-
        Update a story draft.

        PUT /v1/stories/{id}

        Request body:
            - title: Story title (optional)
            - blurb: Story description (optional)
            - cover_key: S3 object key for cover image (optional)

        Returns:
            - 200: Story updated successfully
            - 400: Invalid input or PII detected
            - 401: Not authenticated
            - 403: Not authorized (not the author)
            - 404: Story not found

        Requirements:
            - 5.5: Update draft without affecting publication status
            - 9.1-9.4: PII detection and protection
      parameters:
      - in: path
        name: story_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - stories
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/sync/batch/:
    post:
      operationId: sync_batch_create
      description: |-
        Submit batch operations for efficient synchronization.

        POST /v1/sync/batch

        Request body:
            {
                "operations": [
                    {
                        "type": "create_whisper" | "update_reading_progress" | "create_bookmark",
                        "data": { ... operation-specific data ... }
                    },
                    ...
                ]
            }

        Returns:
            - 200: Batch operation results
            - 400: Invalid request format
            - 401: Not authenticated
            - 207: Multi-status (some operations succeeded, some failed)

        Validates: Requirement 10.3
      tags:
      - sync
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/sync/resolve-conflict/:
    post:
      operationId: sync_resolve_conflict_create
      description: |-
        Resolve a sync conflict with explicit resolution strategy.

        POST /v1/sync/resolve-conflict

        Request body:
            {
                "resource_type": "reading_progress" | "bookmark" | "whisper",
                "resource_id": "resource_identifier",
                "resolution": "client_wins" | "server_wins" | "merge",
                "data": { ... resource data ... },
                "last_sync": "ISO8601_timestamp"
            }

        Returns:
            - 200: Conflict resolved successfully
            - 400: Invalid request or resolution strategy
            - 401: Not authenticated
            - 404: Resource not found

        Validates: Requirement 10.4
      tags:
      - sync
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/sync/status/:
    get:
      operationId: sync_status_retrieve
      description: |-
        Get synchronization status and verify data consistency.

        GET /v1/sync/status?resource_type=<type>&last_sync=<ISO8601_timestamp>

        Query parameters:
            - resource_type: Type of resource to check (optional: stories, whispers, all)
            - last_sync: Last successful sync timestamp (optional)

        Returns:
            - 200: Sync status information
            - 401: Not authenticated

        Validates: Requirement 10.5
      tags:
      - sync
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/sync/stories/:
    get:
      operationId: sync_stories_retrieve
      description: |-
        Get stories modified since a given timestamp for incremental sync.

        GET /v1/sync/stories?since=<ISO8601_timestamp>&limit=<int>

        Query parameters:
            - since: ISO 8601 timestamp (required) - Get stories modified after this time
            - limit: Maximum number of stories to return (optional, default: 100, max: 500)

        Returns:
            - 200: List of modified stories with sync metadata
            - 400: Invalid timestamp format or missing required parameter
            - 401: Not authenticated

        Validates: Requirement 10.1
      tags:
      - sync
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/sync/whispers/:
    get:
      operationId: sync_whispers_retrieve
      description: |-
        Get whispers modified since a given timestamp for incremental sync.

        GET /v1/sync/whispers?since=<ISO8601_timestamp>&limit=<int>&scope=<scope>

        Query parameters:
            - since: ISO 8601 timestamp (required) - Get whispers modified after this time
            - limit: Maximum number of whispers to return (optional, default: 100, max: 500)
            - scope: Filter by scope (optional: GLOBAL, STORY, HIGHLIGHT)
            - story_id: Filter by story ID (optional, requires scope=STORY)

        Returns:
            - 200: List of modified whispers with sync metadata
            - 400: Invalid timestamp format or missing required parameter
            - 401: Not authenticated

        Validates: Requirement 10.1
      tags:
      - sync
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/uploads/chunked/chunk:
    post:
      operationId: uploads_chunked_chunk_create
      description: |-
        Upload a file chunk.

        Request Body:
            - session_id: Upload session ID
            - chunk_number: Chunk sequence number (0-indexed)
            - chunk_data: Chunk binary data

        Returns:
            Chunk upload status with chunks_uploaded and chunks_remaining

        Requirements:
            - 7.3: Support chunked upload for large media files from Mobile_Client
            - 7.4: Provide upload progress tracking for Mobile_Client
      tags:
      - uploads
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/uploads/chunked/complete:
    post:
      operationId: uploads_chunked_complete_create
      description: |-
        Complete chunked upload and finalize file.

        Request Body:
            - session_id: Upload session ID

        Returns:
            Final upload result with status and file information

        Requirements:
            - 7.3: Support chunked upload for large media files from Mobile_Client
      tags:
      - uploads
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/uploads/chunked/init:
    post:
      operationId: uploads_chunked_init_create
      description: |-
        Initialize chunked upload session.

        Request Body:
            - filename: Original filename
            - total_size: Total file size in bytes

        Returns:
            Upload session information with session_id, chunk_size, and chunks_total

        Requirements:
            - 7.2: Validate file size limits appropriate for mobile uploads
            - 7.3: Support chunked upload for large media files from Mobile_Client
      tags:
      - uploads
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/uploads/media:
    post:
      operationId: uploads_media_create
      description: |-
        Handle single mobile media upload with format conversion and EXIF stripping.

        Request Body:
            - file: File upload
            - filename: Original filename
            - content_type: MIME type

        Returns:
            Upload result with URL and metadata

        Requirements:
            - 7.1: Accept mobile-specific image formats (HEIC, HEIF)
            - 7.2: Validate file size limits appropriate for mobile uploads
            - 7.5: Strip EXIF location and sensitive metadata
      tags:
      - uploads
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/uploads/presign:
    post:
      operationId: uploads_presign_create
      description: |-
        Generate presigned URL for file upload.

        Request Body:
            - type: Upload type ('avatar', 'cover', 'whisper_media')
            - content_type: MIME type ('image/jpeg', 'image/png', 'image/webp', 'image/gif')

        Returns:
            Presigned URL, fields, object key, and max size

        Requirements:
            - 14.1: Generate presigned S3 URL with 15-minute expiration
            - 14.2: Enforce 2MB max for avatar uploads
            - 14.3: Enforce 5MB max for story cover uploads
            - 14.4: Enforce 10MB max for whisper media uploads
            - 14.5: Validate file type (JPEG, PNG, WebP, GIF)
            - 14.7: Generate unique object keys using UUID
      tags:
      - uploads
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/users/{handle}/:
    get:
      operationId: users_retrieve
      description: Retrieve a user's public profile information using their unique
        handle.
      summary: Get public user profile by handle
      parameters:
      - in: path
        name: handle
        schema:
          type: string
        description: Unique user handle (3-30 alphanumeric characters and underscores)
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - Authentication
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PublicUserProfile'
              examples:
                PublicProfileResponse:
                  value:
                    id: 123e4567-e89b-12d3-a456-426614174000
                    handle: jane_writer
                    display_name: Jane Writer
                    bio: Fantasy and sci-fi author
                    avatar_key: avatars/uuid-here.jpg
                    created_at: '2024-01-10T08:00:00Z'
                  summary: Public Profile Response
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '404':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/users/{handle}/badges/:
    get:
      operationId: users_badges_retrieve
      description: |-
        GET /v1/users/{handle}/badges - Get user's badges

        Requirements:
            - 24.6: Display user badges
            - 9.1, 9.4: Include cache headers for offline support

        Returns:
            List of badges earned by the user
      parameters:
      - in: path
        name: handle
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/users/{handle}/pinned/:
    get:
      operationId: users_pinned_retrieve
      description: |-
        GET /v1/users/{handle}/pinned - Get user's pinned stories

        Requirements:
            - 24.5: Display pinned stories
            - 9.1, 9.4: Include cache headers for offline support

        Returns:
            List of up to 3 pinned stories
      parameters:
      - in: path
        name: handle
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/users/{handle}/statistics/:
    get:
      operationId: users_statistics_retrieve
      description: |-
        GET /v1/users/{handle}/statistics - Get user statistics

        Requirements:
            - 24.4: Display user statistics
            - 24.8, 24.9: Respect privacy settings
            - 9.1, 9.4: Include cache headers for offline support

        Returns:
            - total_stories: Total published stories
            - total_chapters: Total published chapters
            - total_whispers: Total whispers posted
            - total_likes_received: Total likes on all content
            - follower_count: Number of followers
            - following_count: Number of users following
      parameters:
      - in: path
        name: handle
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/users/{id}/block:
    post:
      operationId: users_block_create
      description: |-
        POST /v1/users/{id}/block - Block a user
        DELETE /v1/users/{id}/block - Unblock a user

        Requirements:
            - 11.3: Block user creates Block record
            - 11.4: Unblock user deletes Block record
            - 11.7: Prevent following blocked users
            - 11.9: Remove follow relationship on block
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
    delete:
      operationId: users_block_destroy
      description: |-
        POST /v1/users/{id}/block - Block a user
        DELETE /v1/users/{id}/block - Unblock a user

        Requirements:
            - 11.3: Block user creates Block record
            - 11.4: Unblock user deletes Block record
            - 11.7: Prevent following blocked users
            - 11.9: Remove follow relationship on block
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '204':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/users/{id}/follow:
    post:
      operationId: users_follow_create
      description: |-
        POST /v1/users/{id}/follow - Follow a user
        DELETE /v1/users/{id}/follow - Unfollow a user

        Requirements:
            - 11.1: Follow user creates Follow record
            - 11.2: Unfollow user deletes Follow record
            - 11.8: Prevent duplicate follow relationships
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
    delete:
      operationId: users_follow_destroy
      description: |-
        POST /v1/users/{id}/follow - Follow a user
        DELETE /v1/users/{id}/follow - Unfollow a user

        Requirements:
            - 11.1: Follow user creates Follow record
            - 11.2: Unfollow user deletes Follow record
            - 11.8: Prevent duplicate follow relationships
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '204':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/users/{id}/followers:
    get:
      operationId: users_followers_retrieve
      description: |-
        GET /v1/users/{id}/followers - List followers for a user

        Requirements:
            - 11.1: List followers with pagination
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/users/{id}/following:
    get:
      operationId: users_following_retrieve
      description: |-
        GET /v1/users/{id}/following - List users that a user is following

        Requirements:
            - 11.1: List following with pagination
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/users/2fa/:
    delete:
      operationId: users_2fa_destroy
      description: |-
        Disable 2FA for the authenticated user.

        DELETE /api/auth/2fa

        Returns:
            {
                "message": "2FA disabled successfully",
                "disabled": true
            }

        Requirements: 7.7, 7.9
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '204':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/users/2fa/backup-code:
    post:
      operationId: users_2fa_backup_code_create
      description: |-
        Verify a backup code for 2FA.

        POST /api/auth/2fa/backup-code

        Request body:
            {
                "code": "ABCD1234"
            }

        Returns:
            {
                "message": "Backup code verified successfully",
                "verified": true,
                "remaining_codes": 9
            }

        Requirements: 7.5
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/users/2fa/regenerate-backup-codes:
    post:
      operationId: users_2fa_regenerate_backup_codes_create
      description: |-
        Regenerate backup codes for the authenticated user.

        POST /api/auth/2fa/regenerate-backup-codes

        Returns:
            {
                "message": "Backup codes regenerated successfully",
                "backup_codes": ["code1", "code2", ...]
            }

        Requirements: 7.8
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/users/2fa/setup:
    post:
      operationId: users_2fa_setup_create
      description: |-
        Initialize 2FA setup for the authenticated user.

        POST /api/auth/2fa/setup

        Returns:
            {
                "secret": "TOTP secret key",
                "qr_code": "base64-encoded QR code image",
                "backup_codes": ["code1", "code2", ...],
                "message": "2FA setup initialized"
            }

        Requirements: 7.1, 7.2
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/users/2fa/status:
    get:
      operationId: users_2fa_status_retrieve
      description: |-
        Check if the user has 2FA enabled and if it's verified in the current session.

        GET /api/auth/2fa/status

        Returns:
            {
                "enabled": true/false,
                "verified": true/false
            }

        Requirements: 7.4
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/users/2fa/verify:
    post:
      operationId: users_2fa_verify_create
      description: |-
        Verify 2FA TOTP code during login.

        POST /api/auth/2fa/verify

        Request body:
            {
                "token": "123456"
            }

        Returns:
            {
                "message": "2FA verification successful",
                "verified": true
            }

        Requirements: 7.4
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/users/2fa/verify-setup:
    post:
      operationId: users_2fa_verify_setup_create
      description: |-
        Verify and confirm 2FA setup with a TOTP code.

        POST /api/auth/2fa/verify-setup

        Request body:
            {
                "token": "123456"
            }

        Returns:
            {
                "message": "2FA enabled successfully",
                "enabled": true
            }

        Requirements: 7.3, 7.9
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/users/email-verification/resend:
    post:
      operationId: users_email_verification_resend_create
      description: |-
        Resend verification email.

        POST /api/users/email-verification/resend

        Request body:
            {
                "email": "user@example.com"
            }

        Requirements: 5.2
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/users/email-verification/send:
    post:
      operationId: users_email_verification_send_create
      description: |-
        Send or resend email verification.

        POST /api/users/email-verification/send

        Request body:
            {
                "email": "user@example.com"
            }

        Requirements: 5.2
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/users/email-verification/status:
    get:
      operationId: users_email_verification_status_retrieve
      description: |-
        Check if user's email is verified.

        GET /api/users/email-verification/status

        Requirements: 5.3
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/users/email-verification/verify:
    post:
      operationId: users_email_verification_verify_create
      description: |-
        Verify email with token.

        POST /api/users/email-verification/verify

        Request body:
            {
                "token": "verification_token_here"
            }

        Requirements: 5.1
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/users/me/:
    get:
      operationId: users_me_retrieve
      description: "\n    Retrieve or update the authenticated user's profile information.\n\
        \    \n    **GET**: Returns the current user's profile with all fields.\n\
        \    \n    **PUT**: Updates the current user's profile. Handle must be unique\
        \ and follow format rules:\n    - Alphanumeric characters and underscores\
        \ only\n    - 3-30 characters in length\n    "
      summary: Get or update current user profile
      tags:
      - Authentication
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfileRead'
              examples:
                ProfileResponse:
                  value:
                    id: 123e4567-e89b-12d3-a456-426614174000
                    clerk_user_id: user_2abc123def456
                    handle: john_doe
                    display_name: John Doe
                    bio: Writer and reader of serial fiction
                    avatar_key: avatars/uuid-here.jpg
                    created_at: '2024-01-15T10:30:00Z'
                    updated_at: '2024-01-20T14:45:00Z'
                  summary: Profile Response
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '401':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '409':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
    put:
      operationId: users_me_update
      description: "\n    Retrieve or update the authenticated user's profile information.\n\
        \    \n    **GET**: Returns the current user's profile with all fields.\n\
        \    \n    **PUT**: Updates the current user's profile. Handle must be unique\
        \ and follow format rules:\n    - Alphanumeric characters and underscores\
        \ only\n    - 3-30 characters in length\n    "
      summary: Get or update current user profile
      tags:
      - Authentication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserProfileWriteRequest'
            examples:
              UpdateProfileExample:
                value:
                  handle: john_doe
                  display_name: John Doe
                  bio: Writer and reader of serial fiction
                  avatar_key: avatars/uuid-here.jpg
                summary: Update Profile Example
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfileRead'
              examples:
                ProfileResponse:
                  value:
                    id: 123e4567-e89b-12d3-a456-426614174000
                    clerk_user_id: user_2abc123def456
                    handle: john_doe
                    display_name: John Doe
                    bio: Writer and reader of serial fiction
                    avatar_key: avatars/uuid-here.jpg
                    created_at: '2024-01-15T10:30:00Z'
                    updated_at: '2024-01-20T14:45:00Z'
                  summary: Profile Response
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '401':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '409':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/users/me/pin-story/:
    post:
      operationId: users_me_pin_story_create
      description: |-
        POST /v1/me/pin-story - Pin a story to profile

        Requirements:
            - 24.5: Allow pinning up to 3 stories

        Request body:
            - story_id: ID of story to pin
            - position: Position (1, 2, or 3)
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/users/me/pin-story/{position}/:
    delete:
      operationId: users_me_pin_story_destroy
      description: |-
        DELETE /v1/me/pin-story/{position} - Unpin a story from profile

        Requirements:
            - 24.5: Allow unpinning stories
      parameters:
      - in: path
        name: position
        schema:
          type: integer
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '204':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/users/sessions/active/:
    get:
      operationId: users_sessions_active_retrieve
      description: Get all active sessions for the authenticated user. Provides per-device
        session tracking for security monitoring.
      summary: Get active sessions
      tags:
      - Mobile Session Management
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                description: Active sessions retrieved successfully
                content:
                  application/json:
                    example:
                      sessions:
                      - session_id: session_abc123
                        client_type: mobile-ios
                        device_info:
                          model: iPhone 14 Pro
                          os_version: iOS 17.2
                        created_at: '2024-02-20T10:00:00Z'
                        last_refreshed_at: '2024-02-25T15:30:00Z'
                        expires_at: '2024-03-20T10:00:00Z'
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '401':
          content:
            application/json:
              schema:
                description: Authentication required
          description: ''
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/users/sessions/create/:
    post:
      operationId: users_sessions_create_create
      description: Create a new mobile session after successful authentication. Returns
        a refresh token that can be used to extend the session. Mobile sessions have
        longer durations (30 days) compared to web sessions (24 hours).
      summary: Create mobile session
      tags:
      - Mobile Session Management
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                device_token_id:
                  type: string
                  description: Optional device token ID for push notifications
                  nullable: true
                device_info:
                  type: object
                  description: Optional device metadata (model, OS version, etc.)
                  nullable: true
                  properties:
                    model:
                      type: string
                    os_version:
                      type: string
                    app_version:
                      type: string
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '201':
          content:
            application/json:
              schema:
                description: Session created successfully
                content:
                  application/json:
                    example:
                      session_id: session_abc123
                      refresh_token: a1b2c3d4e5f6...
                      expires_at: '2024-03-20T10:30:00Z'
                      client_type: mobile-ios
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '401':
          content:
            application/json:
              schema:
                description: Authentication required or token expired
                content:
                  application/json:
                    examples:
                      expired_token:
                        summary: Token expired
                        value:
                          error:
                            code: TOKEN_EXPIRED
                            message: Your authentication token has expired
                            details:
                              technical_message: JWT token has expired and needs to
                                be refreshed
                              refresh_guidance: Please use the /v1/sessions/refresh
                                endpoint with your refresh token to obtain a new access
                                token
                      invalid_token:
                        summary: Invalid token
                        value:
                          error:
                            code: TOKEN_INVALID
                            message: Your authentication token is invalid
                            details:
                              technical_message: JWT token signature verification
                                failed or token is malformed
          description: ''
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/users/sessions/refresh/:
    post:
      operationId: users_sessions_refresh_create
      description: Refresh an expired or expiring JWT token using a refresh token.
        Mobile clients receive longer session durations (30 days) compared to web
        clients (24 hours).
      summary: Refresh authentication token
      tags:
      - Mobile Session Management
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                refresh_token:
                  type: string
                  description: Refresh token received during login or previous refresh
              required:
              - refresh_token
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                description: Token refreshed successfully
                content:
                  application/json:
                    example:
                      access_token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...
                      expires_at: '2024-03-20T10:30:00Z'
                      session_id: session_abc123
                      client_type: mobile-ios
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '400':
          content:
            application/json:
              schema:
                description: Missing refresh token
                content:
                  application/json:
                    example:
                      error:
                        code: MISSING_FIELD
                        message: Refresh token is required
          description: ''
        '401':
          content:
            application/json:
              schema:
                description: Invalid or expired refresh token
                content:
                  application/json:
                    example:
                      error:
                        code: INVALID_REFRESH_TOKEN
                        message: Refresh token is invalid or expired
          description: ''
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/users/sessions/revoke/:
    post:
      operationId: users_sessions_revoke_create
      description: Revoke a mobile session to log out the user from a specific device.
        The refresh token will no longer be valid after revocation.
      summary: Revoke session (logout)
      tags:
      - Mobile Session Management
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                refresh_token:
                  type: string
                  description: Refresh token to revoke
              required:
              - refresh_token
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                description: Session revoked successfully
                content:
                  application/json:
                    example:
                      message: Session revoked successfully
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '400':
          content:
            application/json:
              schema:
                description: Missing refresh token
          description: ''
        '404':
          content:
            application/json:
              schema:
                description: Session not found
          description: ''
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/users/sessions/revoke-all/:
    post:
      operationId: users_sessions_revoke_all_create
      description: Revoke all active sessions for the authenticated user. Useful for
        security events like password changes or suspected account compromise.
      summary: Revoke all sessions
      tags:
      - Mobile Session Management
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                description: All sessions revoked successfully
                content:
                  application/json:
                    example:
                      message: All sessions revoked successfully
                      count: 3
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '401':
          content:
            application/json:
              schema:
                description: Authentication required
          description: ''
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
  /v1/users/test-auth/:
    get:
      operationId: users_test_auth_retrieve
      description: |-
        Test endpoint to verify Clerk authentication middleware.

        Returns the clerk_user_id and user_profile information if authenticated.
      tags:
      - users
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
      parameters:
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
  /v1/whispers/:
    get:
      operationId: whispers_list
      description: "\n    **GET**: List whispers with optional scope filtering (global,\
        \ story-specific, or highlight-specific).\n    Supports cursor-based pagination.\n\
        \    \n    **POST**: Create a new whisper. Rate limited to 10 whispers per\
        \ minute.\n    Whispers can be global, linked to a story, or linked to a highlight.\n\
        \    "
      summary: List whispers or create new whisper
      parameters:
      - in: query
        name: cursor
        schema:
          type: string
        description: Pagination cursor for next page
      - in: query
        name: highlight_id
        schema:
          type: string
          format: uuid
        description: Filter whispers by highlight ID (when scope=HIGHLIGHT)
      - in: query
        name: scope
        schema:
          type: string
          enum:
          - GLOBAL
          - HIGHLIGHT
          - STORY
        description: 'Filter by scope: GLOBAL, STORY, or HIGHLIGHT'
      - in: query
        name: story_id
        schema:
          type: string
          format: uuid
        description: Filter whispers by story ID (when scope=STORY)
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - Whispers
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Whisper'
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Whisper'
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '401':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '429':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
    post:
      operationId: whispers_create
      description: "\n    **GET**: List whispers with optional scope filtering (global,\
        \ story-specific, or highlight-specific).\n    Supports cursor-based pagination.\n\
        \    \n    **POST**: Create a new whisper. Rate limited to 10 whispers per\
        \ minute.\n    Whispers can be global, linked to a story, or linked to a highlight.\n\
        \    "
      summary: List whispers or create new whisper
      parameters:
      - in: query
        name: cursor
        schema:
          type: string
        description: Pagination cursor for next page
      - in: query
        name: highlight_id
        schema:
          type: string
          format: uuid
        description: Filter whispers by highlight ID (when scope=HIGHLIGHT)
      - in: query
        name: scope
        schema:
          type: string
          enum:
          - GLOBAL
          - HIGHLIGHT
          - STORY
        description: 'Filter by scope: GLOBAL, STORY, or HIGHLIGHT'
      - in: query
        name: story_id
        schema:
          type: string
          format: uuid
        description: Filter whispers by story ID (when scope=STORY)
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - Whispers
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WhisperCreateRequest'
            examples:
              CreateGlobalWhisper:
                value:
                  content: Just finished reading an amazing chapter!
                  scope: GLOBAL
                summary: Create Global Whisper
              CreateStoryWhisper:
                value:
                  content: This story keeps getting better!
                  scope: STORY
                  story_id: 123e4567-e89b-12d3-a456-426614174000
                summary: Create Story Whisper
        required: true
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Whisper'
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Whisper'
          description: ''
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '400':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '401':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
        '429':
          content:
            application/json:
              schema:
                type: object
                additionalProperties: {}
          description: ''
  /v1/whispers/{whisper_id}:
    delete:
      operationId: whispers_destroy
      description: |-
        Soft delete a whisper.

        DELETE /v1/whispers/{id}

        Returns:
            - 204: Whisper deleted successfully
            - 401: Not authenticated
            - 403: Not authorized (not the whisper author)
            - 404: Whisper not found

        Requirements:
            - 6.5: Soft delete whisper
      parameters:
      - in: path
        name: whisper_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - whispers
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '204':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/whispers/{whisper_id}/like:
    post:
      operationId: whispers_like_create
      description: |-
        Like a whisper.

        POST /v1/whispers/{id}/like

        Returns:
            - 201: Whisper liked successfully
            - 401: Not authenticated
            - 404: Whisper not found
            - 409: Already liked

        Requirements:
            - 7.3: Like whisper
            - 7.7: Prevent duplicate likes
      parameters:
      - in: path
        name: whisper_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - whispers
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/whispers/{whisper_id}/replies:
    get:
      operationId: whispers_replies_retrieve
      description: |-
        List replies or create a reply to a whisper.

        GET /v1/whispers/{id}/replies - List replies
        POST /v1/whispers/{id}/replies - Create reply
      parameters:
      - in: path
        name: whisper_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      - name: fields
        in: query
        required: false
        schema:
          type: string
        description: 'Comma-separated list of fields to include in the response. Useful
          for mobile clients to reduce payload size. Example: "id,title,author" returns
          only those fields.'
        examples:
          minimal:
            value: id,title
            summary: Minimal fields
          standard:
            value: id,title,author,created_at
            summary: Standard fields
      tags:
      - whispers
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
            ETag:
              $ref: '#/components/headers/ETag'
            Last-Modified:
              $ref: '#/components/headers/Last-Modified'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
    post:
      operationId: whispers_replies_create
      description: |-
        List replies or create a reply to a whisper.

        GET /v1/whispers/{id}/replies - List replies
        POST /v1/whispers/{id}/replies - Create reply
      parameters:
      - in: path
        name: whisper_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - whispers
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
  /v1/whispers/{whisper_id}/unlike:
    delete:
      operationId: whispers_unlike_destroy
      description: |-
        Unlike a whisper.

        DELETE /v1/whispers/{id}/like

        Returns:
            - 204: Whisper unliked successfully
            - 401: Not authenticated
            - 404: Whisper or like not found

        Requirements:
            - 7.4: Unlike whisper
      parameters:
      - in: path
        name: whisper_id
        schema:
          type: string
        required: true
      - name: X-Client-Type
        in: header
        required: false
        schema:
          type: string
          enum:
          - web
          - mobile-ios
          - mobile-android
          default: web
        description: Client type identifier for optimized responses. Mobile clients
          receive deep links, optimized payloads, and mobile-specific features. Defaults
          to "web" if not specified.
        examples:
          ios:
            value: mobile-ios
            summary: iOS mobile app
          android:
            value: mobile-android
            summary: Android mobile app
          web:
            value: web
            summary: Web browser
      tags:
      - whispers
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '204':
          description: No response body
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
            X-API-Version:
              $ref: '#/components/headers/X-API-Version'
        '429':
          description: Rate limit exceeded
          headers:
            Retry-After:
              description: Seconds to wait before retrying
              schema:
                type: integer
                example: 60
            X-RateLimit-Remaining:
              $ref: '#/components/headers/X-RateLimit-Remaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/X-RateLimit-Reset'
components:
  schemas:
    ErrorResponse:
      type: object
      description: |-
        Standard error response format.

        Requirements:
            - 3.2: Consistent error response format
      properties:
        success:
          type: boolean
          default: false
        error:
          type: object
          additionalProperties:
            type: string
          description: Error details including code, message, and optional retry_after
      required:
      - error
    ForgotPasswordRequestRequest:
      type: object
      description: |-
        Serializer for POST /api/forgot-password request.

        Requirements:
            - 1.1: Accept email address for password reset request
      properties:
        email:
          type: string
          format: email
          minLength: 1
          description: Email address of the account to reset
      required:
      - email
    ForgotPasswordResponse:
      type: object
      description: |-
        Serializer for POST /api/forgot-password response.

        Requirements:
            - 1.4: Return consistent success response
      properties:
        success:
          type: boolean
          default: true
        message:
          type: string
          default: If an account exists with this email, you will receive a password
            reset link.
    PublicUserProfile:
      type: object
      description: |-
        Serializer for public user profile data (accessed via handle).

        Returns public profile fields only (excludes clerk_user_id).

        Requirements:
            - 1.4: Return public profile when accessed by handle
            - 24.1, 24.7, 24.12: Return public profile customization
            - 6.1, 6.3: Include deep links for mobile clients
      properties:
        id:
          type: string
          readOnly: true
        handle:
          type: string
          readOnly: true
        display_name:
          type: string
          readOnly: true
        bio:
          type: string
          readOnly: true
          nullable: true
        avatar_key:
          type: string
          readOnly: true
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        banner_key:
          type: string
          readOnly: true
          nullable: true
        theme_color:
          type: string
          readOnly: true
          nullable: true
        twitter_url:
          type: string
          readOnly: true
          nullable: true
        instagram_url:
          type: string
          readOnly: true
          nullable: true
        website_url:
          type: string
          readOnly: true
          nullable: true
        pinned_story_1:
          type: string
          readOnly: true
          nullable: true
        pinned_story_2:
          type: string
          readOnly: true
          nullable: true
        pinned_story_3:
          type: string
          readOnly: true
          nullable: true
      required:
      - avatar_key
      - banner_key
      - bio
      - created_at
      - display_name
      - handle
      - id
      - instagram_url
      - pinned_story_1
      - pinned_story_2
      - pinned_story_3
      - theme_color
      - twitter_url
      - website_url
    ResetPasswordRequestRequest:
      type: object
      description: |-
        Serializer for POST /api/reset-password request.

        Requirements:
            - 5.1: Accept token, password, and confirmation
      properties:
        token:
          type: string
          minLength: 1
          description: Password reset token from email
        password:
          type: string
          writeOnly: true
          minLength: 1
          description: New password
        confirm_password:
          type: string
          writeOnly: true
          minLength: 1
          description: Password confirmation
      required:
      - confirm_password
      - password
      - token
    ResetPasswordResponse:
      type: object
      description: |-
        Serializer for POST /api/reset-password response.

        Requirements:
            - 5.2: Return success or error response
      properties:
        success:
          type: boolean
        message:
          type: string
          nullable: true
        errors:
          type: array
          items:
            type: string
          nullable: true
      required:
      - success
    StoryCreateRequest:
      type: object
      description: |-
        Serializer for creating a story draft.

        Accepts: title, blurb, cover_key (optional), mark_as_nsfw (optional)

        Requirements:
            - 5.1: Create story draft with title, blurb, cover_key
            - 8.3: Allow content creators to manually mark their content as NSFW
      properties:
        title:
          type: string
          minLength: 1
          description: Story title (max 200 characters)
          maxLength: 200
        blurb:
          type: string
          minLength: 1
          description: Story description/blurb (max 1000 characters)
          maxLength: 1000
        cover_key:
          type: string
          nullable: true
          description: S3 object key for cover image
          maxLength: 255
        mark_as_nsfw:
          type: boolean
          default: false
          description: Mark this story as NSFW (Not Safe For Work)
      required:
      - blurb
      - title
    StoryDetail:
      type: object
      description: |-
        Serializer for story detail view (all fields including relations).

        Returns: All story fields plus author info, tags, chapter count

        Requirements:
            - 5.1: Get story by slug with full details
            - 6.1, 6.3: Include deep links for mobile clients
      properties:
        id:
          type: string
          readOnly: true
        slug:
          type: string
          readOnly: true
        title:
          type: string
          readOnly: true
        blurb:
          type: string
          readOnly: true
        cover_key:
          type: string
          readOnly: true
          nullable: true
        author_id:
          type: string
          readOnly: true
        published:
          type: boolean
          readOnly: true
        published_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        deleted_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - author_id
      - blurb
      - cover_key
      - created_at
      - deleted_at
      - id
      - published
      - published_at
      - slug
      - title
      - updated_at
    StoryList:
      type: object
      description: |-
        Serializer for listing stories (minimal fields).

        Returns: id, slug, title, blurb, cover_key, author info, published status, timestamps

        Requirements:
            - 5.1: List stories with basic information
      properties:
        id:
          type: string
          readOnly: true
        slug:
          type: string
          readOnly: true
        title:
          type: string
          readOnly: true
        blurb:
          type: string
          readOnly: true
        cover_key:
          type: string
          readOnly: true
          nullable: true
        author_id:
          type: string
          readOnly: true
        published:
          type: boolean
          readOnly: true
        published_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - author_id
      - blurb
      - cover_key
      - created_at
      - id
      - published
      - published_at
      - slug
      - title
      - updated_at
    UserProfileRead:
      type: object
      description: |-
        Serializer for reading UserProfile data.

        Returns all public profile fields including:
        - id, clerk_user_id, handle, display_name, bio, avatar_key, age_verified, created_at
        - Profile customization: banner_key, theme_color, social links, pinned stories

        Requirements:
            - 1.4: Return profile fields when user requests their profile
            - 24.1, 24.7, 24.12: Return profile customization fields
            - 6.1, 6.3: Include deep links for mobile clients
      properties:
        id:
          type: string
          readOnly: true
        clerk_user_id:
          type: string
          readOnly: true
        handle:
          type: string
          readOnly: true
        display_name:
          type: string
          readOnly: true
        bio:
          type: string
          readOnly: true
          nullable: true
        avatar_key:
          type: string
          readOnly: true
          nullable: true
        age_verified:
          type: boolean
          readOnly: true
        age_verified_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        banner_key:
          type: string
          readOnly: true
          nullable: true
        theme_color:
          type: string
          readOnly: true
          nullable: true
        twitter_url:
          type: string
          readOnly: true
          nullable: true
        instagram_url:
          type: string
          readOnly: true
          nullable: true
        website_url:
          type: string
          readOnly: true
          nullable: true
        pinned_story_1:
          type: string
          readOnly: true
          nullable: true
        pinned_story_2:
          type: string
          readOnly: true
          nullable: true
        pinned_story_3:
          type: string
          readOnly: true
          nullable: true
      required:
      - age_verified
      - age_verified_at
      - avatar_key
      - banner_key
      - bio
      - clerk_user_id
      - created_at
      - display_name
      - handle
      - id
      - instagram_url
      - pinned_story_1
      - pinned_story_2
      - pinned_story_3
      - theme_color
      - twitter_url
      - website_url
    UserProfileWriteRequest:
      type: object
      description: |-
        Serializer for updating UserProfile data.

        Allows updating: handle, display_name, bio, avatar_key, profile customization

        Requirements:
            - 1.3: Validate handle uniqueness and update profile fields
            - 1.5: Enforce handle format (alphanumeric + underscore, 3-30 chars)
            - 24.7, 24.12: Allow updating social links and profile customization
      properties:
        handle:
          type: string
          minLength: 3
          description: Alphanumeric characters and underscores only, 3-30 characters
          maxLength: 30
        display_name:
          type: string
          minLength: 1
          description: Display name for the user
          maxLength: 100
        bio:
          type: string
          nullable: true
          description: User bio (max 500 characters)
          maxLength: 500
        avatar_key:
          type: string
          nullable: true
          description: S3 object key for avatar image
          maxLength: 255
        banner_key:
          type: string
          nullable: true
          description: S3 object key for banner image
          maxLength: 255
        theme_color:
          type: string
          nullable: true
          description: 'Hex color code for profile theme (e.g., #6366f1)'
          maxLength: 7
        twitter_url:
          type: string
          format: uri
          nullable: true
          description: Twitter profile URL
          maxLength: 255
        instagram_url:
          type: string
          format: uri
          nullable: true
          description: Instagram profile URL
          maxLength: 255
        website_url:
          type: string
          format: uri
          nullable: true
          description: Personal website URL
          maxLength: 255
        pinned_story_1:
          type: string
          nullable: true
          description: ID of first pinned story
          maxLength: 36
        pinned_story_2:
          type: string
          nullable: true
          description: ID of second pinned story
          maxLength: 36
        pinned_story_3:
          type: string
          nullable: true
          description: ID of third pinned story
          maxLength: 36
    ValidateTokenResponse:
      type: object
      description: |-
        Serializer for GET /api/reset-password/:token response.

        Requirements:
            - 4.1: Return validation result for token
      properties:
        valid:
          type: boolean
        message:
          type: string
          nullable: true
      required:
      - valid
    Whisper:
      type: object
      description: |-
        Serializer for Whisper data.

        Returns: id, user_id, content, media_key, scope, story_id, highlight_id,
                 parent_id, deleted_at, created_at, reply_count, like_count

        Requirements:
            - 6.1: Create whisper with content and scope
            - 7.5: Include reply count and like count
            - 6.1, 6.3: Include deep links for mobile clients
      properties:
        id:
          type: string
          readOnly: true
        user_id:
          type: string
          readOnly: true
        content:
          type: string
          readOnly: true
        media_key:
          type: string
          readOnly: true
          nullable: true
        scope:
          type: string
          readOnly: true
        story_id:
          type: string
          readOnly: true
          nullable: true
        highlight_id:
          type: string
          readOnly: true
          nullable: true
        parent_id:
          type: string
          readOnly: true
          nullable: true
        deleted_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        reply_count:
          type: integer
          readOnly: true
        like_count:
          type: integer
          readOnly: true
      required:
      - content
      - created_at
      - deleted_at
      - highlight_id
      - id
      - like_count
      - media_key
      - parent_id
      - reply_count
      - scope
      - story_id
      - user_id
    WhisperCreateRequest:
      type: object
      description: |-
        Serializer for creating a whisper.

        Accepts: content, media_key (optional), scope, story_id (optional), highlight_id (optional), mark_as_nsfw (optional)

        Requirements:
            - 6.1: Create global whisper
            - 6.2: Create story-linked whisper
            - 6.3: Create highlight-linked whisper
            - 8.3: Allow content creators to manually mark their content as NSFW
      properties:
        content:
          type: string
          minLength: 1
          description: Whisper content (max 280 characters)
          maxLength: 280
        media_key:
          type: string
          nullable: true
          description: S3 object key for media attachment
          maxLength: 255
        scope:
          enum:
          - GLOBAL
          - STORY
          - HIGHLIGHT
          type: string
          x-spec-enum-id: 5155dd8b9faafdde
          description: |-
            Whisper scope (GLOBAL, STORY, or HIGHLIGHT)

            * `GLOBAL` - GLOBAL
            * `STORY` - STORY
            * `HIGHLIGHT` - HIGHLIGHT
        story_id:
          type: string
          nullable: true
          minLength: 1
          description: Story ID (required if scope is STORY)
        highlight_id:
          type: string
          nullable: true
          minLength: 1
          description: Highlight ID (required if scope is HIGHLIGHT)
        mark_as_nsfw:
          type: boolean
          default: false
          description: Mark this whisper as NSFW (Not Safe For Work)
      required:
      - content
      - scope
  securitySchemes:
    basicAuth:
      type: http
      scheme: basic
    cookieAuth:
      type: apiKey
      in: cookie
      name: sessionid
  headers:
    X-RateLimit-Remaining:
      description: Number of requests remaining in the current rate limit window
      schema:
        type: integer
        example: 145
    X-RateLimit-Reset:
      description: Unix timestamp when the rate limit window resets
      schema:
        type: integer
        example: 1704067200
    X-API-Version:
      description: Current API version being used
      schema:
        type: string
        example: v1
    X-API-Deprecation:
      description: Indicates if the current API version is deprecated
      schema:
        type: string
        example: 'true'
    X-API-Sunset:
      description: Date when the deprecated API version will be removed (RFC 3339
        format)
      schema:
        type: string
        format: date-time
        example: '2024-12-31T23:59:59Z'
    ETag:
      description: Entity tag for cache validation
      schema:
        type: string
        example: '"33a64df551425fcc55e4d42a148795d9f25f89d4"'
    Last-Modified:
      description: Last modification timestamp for cache validation
      schema:
        type: string
        format: date-time
        example: Wed, 21 Oct 2023 07:28:00 GMT
    Cache-Control:
      description: Cache control directives for client-side caching
      schema:
        type: string
        example: max-age=3600, must-revalidate
servers:
- url: http://localhost:8000
  description: Development server
- url: https://api.muejam.com
  description: Production server
tags:
- name: Authentication
  description: User authentication and profile management
- name: Stories
  description: Story and chapter management
- name: Library
  description: Personal library and shelf management
- name: Reading
  description: Reading progress, bookmarks, and highlights
- name: Whispers
  description: Micro-posting system
- name: Social
  description: Follow and block operations
- name: Notifications
  description: Notification management
- name: Discovery
  description: Content discovery feeds
- name: Search
  description: Search and autocomplete
- name: Uploads
  description: Media upload management
- name: Moderation
  description: Content reporting
- name: Health
  description: System health monitoring
- name: Mobile
  description: Mobile-specific endpoints for push notifications, device management,
    and configuration
- name: Testing
  description: Test mode endpoints for mobile app development and QA
